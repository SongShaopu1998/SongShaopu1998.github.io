I"~´<p>æˆ‘å°†2017å†¬å­£ä¸2018ç§‹å­£Stanfordçš„CS 106Xä½œä¸šå‘å¸ƒåœ¨æˆ‘çš„<a href="https://github.com/SongShaopu1998/Stanford-CS-106X">Githubä»“åº“</a>.</p>

<h2 id="cs-106x-lecture-2--functions--strings">CS 106X Lecture 2 â€“ Functions &amp; Strings</h2>

<h3 id="output-parameters">Output Parameters</h3>

<p><em>Pass by reference to return multiple items.</em></p>

<p>å½“<code class="language-plaintext highlighter-rouge">pass by value</code>æ—¶ï¼Œå‚æ•°ä¼šå¤åˆ¶ä¸€ä»½åˆ°å‡½æ•°è‡ªèº«çš„<code class="language-plaintext highlighter-rouge">frame</code>é‡Œï¼Œæ‰€ä»¥å¤–éƒ¨çš„å€¼ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯<code class="language-plaintext highlighter-rouge">pass by reference</code>æ˜¯ä¼ æŒ‡é’ˆã€‚</p>

<p><strong>å½“æˆ‘ä»¬é€šè¿‡ä¼ é€’æŒ‡é’ˆçš„æ–¹å¼åƒå‡½æ•°ä¼ é€’å‚æ•°æ—¶ï¼Œç¨‹åºä¼šå°†åŸæœ¬çš„æŒ‡é’ˆå¤åˆ¶ä¸€ä»½åˆ°å‡½æ•°æ ˆä¸­ï¼Œæ–°å¤åˆ¶çš„æŒ‡é’ˆä¸ä¸»å‡½æ•°ä¸­çš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„åœ°å€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¿®æ”¹æŒ‡é’ˆæœ¬èº«ï¼Œé‚£ä¹ˆä¸»å‡½æ•°ä¸­çš„æŒ‡é’ˆä¸ä¼šè¢«å½±å“ã€‚è¿™æ„å‘³ç€åœ¨æŸäº›æ“ä½œï¼Œæ¯”å¦‚å¦‚æœæˆ‘ä»¬æƒ³è¦å‘äºŒå‰æ ‘ä¸­æ’å…¥èŠ‚ç‚¹ï¼Œæˆ–è€…åˆ é™¤äºŒå‰æ ‘ä¸­çš„æŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬è¦ä¼ é€’å¼•ç”¨ï¼Œå› ä¸ºè¿™äº›æ“ä½œç‰µæ‰¯åˆ°äº†ä¿®æ”¹æŒ‡é’ˆæœ¬èº«ã€‚è€Œå¦‚æœæˆ‘ä»¬ä»…ä»…æ˜¯æƒ³è¦ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¼ å…¥ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œä¿®æ”¹æ•°ç»„çš„å€¼ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸éœ€è¦ä¼ é€’å¼•ç”¨ã€‚</strong></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">datingRange</span><span class="p">(</span><span class="kt">int</span> <span class="n">age</span><span class="p">,</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">min</span><span class="p">,</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">min</span> <span class="o">=</span> <span class="n">age</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">7</span><span class="p">;</span> <span class="n">max</span> <span class="o">=</span> <span class="p">(</span><span class="n">age</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span> 
    <span class="kt">int</span> <span class="n">young</span><span class="p">;</span> 
    <span class="kt">int</span> <span class="n">old</span><span class="p">;</span> 
    <span class="n">datingRange</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="n">young</span><span class="p">,</span> <span class="n">old</span><span class="p">);</span> 
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A 48-year-old could date someone from "</span> <span class="o">&lt;&lt;</span> <span class="n">young</span> <span class="o">&lt;&lt;</span> <span class="s">" to "</span> <span class="o">&lt;&lt;</span> <span class="n">old</span> <span class="s">" years old."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="default-parameters">Default Parameters</h3>

<p>All parameters with default value must appear last in the formals list.</p>

<h3 id="c-string-bugs">C String bugs</h3>

<p>Cæœ¬èº«æä¾›çš„å­—ç¬¦ä¸²ä¸å…·å¤‡<code class="language-plaintext highlighter-rouge">+ï¼Œfind</code>ç­‰ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶ï¼Œæœ€å¥½è¦è½¬åŒ–ä¸ºC++æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œç”¨<code class="language-plaintext highlighter-rouge">string</code>ç±»å‹åšå˜é‡ç±»å‹å£°æ˜ï¼š</p>

<blockquote>
  <ul>
    <li>
      <p>string(â€œ<em>text</em>â€) C string to C++ string â€“</p>
    </li>
    <li>
      <p><em>string</em>.c_str() C++ string to C string</p>
    </li>
  </ul>
</blockquote>

<pre><code class="language-C++">string s = string("hi") + "there"; 
string s = "hi";           // convert to C++ string (auto-conversion)

s += "there";
</code></pre>

<h2 id="cs-106x-lecture-3--vectors--grid-io-stream">CS 106X Lecture 3 â€“ Vectors &amp; Grid; IO stream</h2>

<h3 id="vector--grid">Vector &amp; Grid</h3>

<p>ä½¿ç”¨æ–¹æ³•ï¼š</p>

<pre><code class="language-C++">Vector&lt;int&gt; names;
names.add("Dog");

Grid&lt;int&gt; matrix(3,4);
</code></pre>

<p>å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">range for loop</code>:</p>

<pre><code class="language-C++">for(int value: matrix){
    // do something with value;
}
// "for-each" by  reference

for (string&amp; name: names){
    name += "!";
}
</code></pre>

<blockquote>
  <p>å½“ä»–ä»¬ä½œä¸ºå‡½æ•°å‚æ•°ä½¿ç”¨æ—¶ï¼Œè¦æ³¨æ„ä¼ é€’å¼•ç”¨ï¼Œ<code class="language-plaintext highlighter-rouge">pass by value</code>æ˜¯å¾ˆæ…¢çš„</p>
</blockquote>

<h4 id="remove">Remove?</h4>

<p>å½“æˆ‘ä»¬è¯•å›¾ä»<code class="language-plaintext highlighter-rouge">Vector</code>ä¸­åˆ é™¤å…ƒç´ æ—¶ï¼Œæœ€å¥½çš„éå†æ–¹æ³•æ˜¯è‡ªåå‘å‰éå†ï¼Œè¿™æ ·å¯ä»¥é¿å…å› ä¸ºåˆ é™¤å…ƒç´ å¸¦æ¥çš„<code class="language-plaintext highlighter-rouge">shifting</code>çš„å½±å“ã€‚</p>

<h3 id="io-stream">IO Stream</h3>

<ul>
  <li><strong>æ•´è¡Œè¯»å–</strong></li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iftream</span> <span class="n">input</span><span class="p">;</span>
<span class="n">input</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"poem.txt"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">fail</span><span class="p">()){</span>
    <span class="c1">// do something if fails;</span>
<span class="p">}</span>
<span class="k">else</span><span class="p">{</span>
    <span class="n">string</span> <span class="n">line</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">getline</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">line</span><span class="p">)){</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">line</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="n">input</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</code></pre></div></div>

<ul>
  <li><strong>å•è¯è¯»å–</strong></li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ifstream</span> <span class="n">file</span><span class="p">;</span>
<span class="n">file</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
<span class="n">string</span> <span class="n">word</span><span class="p">;</span>

<span class="k">while</span><span class="p">(</span><span class="n">input</span> <span class="o">&gt;&gt;</span> <span class="n">word</span><span class="p">){</span>
    <span class="c1">// do something with words</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä¸€ç§é”™è¯¯çš„æ–‡ä»¶éå†æ–¹æ³•ï¼š</p>

<pre><code class="language-C++">while(!input.fail()){
    string line;
    getline(input, line);
    cout &lt;&lt; line &lt;&lt; endl;
}
</code></pre>

<p>è¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºï¼Œä¼šå¤šéå†ä¸€è¡Œï¼ˆå¯èƒ½æ˜¯ç©ºè¡Œï¼‰ï¼Œå› ä¸ºåœ¨è¯»å–å®Œæœ€åä¸€è¡Œçš„æ•°æ®åï¼Œ<code class="language-plaintext highlighter-rouge">input.fail</code>ä»ç„¶ä¸º<code class="language-plaintext highlighter-rouge">false</code>.</p>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ“ä½œç¬¦<code class="language-plaintext highlighter-rouge">&gt;&gt;</code>è¿›è¡Œæ–‡ä»¶è¯»å–ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109051747830.png" alt="image-20210905174746335" style="zoom:50%;" /></p>

<ul>
  <li><strong>tokenize a string</strong></li>
</ul>

<p>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">&lt;sstream&gt;</code>ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">istringstream</span> <span class="nf">input</span><span class="p">(</span><span class="s">"test string 12345"</span><span class="p">);</span>
<span class="n">string</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">phone</span><span class="p">;</span>
<span class="n">input</span> <span class="o">&gt;&gt;</span> <span class="n">first</span> <span class="o">&gt;&gt;</span> <span class="n">last</span><span class="p">;</span> <span class="c1">// first = "test", last = "string"</span>

<span class="n">input</span> <span class="o">&gt;&gt;</span> <span class="n">phone</span><span class="p">;</span> <span class="c1">// 12345</span>
</code></pre></div></div>

<p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¹‹å‰çš„<code class="language-plaintext highlighter-rouge">while</code>å¾ªç¯æ¥è¯»å–æ‰€æœ‰<code class="language-plaintext highlighter-rouge">tokens</code>ã€‚</p>

<ul>
  <li><strong>write output to a string buffer (without display directly)</strong></li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span> <span class="n">iq</span> <span class="o">=</span> <span class="mi">45</span><span class="p">;</span>
<span class="n">ostringstream</span> <span class="n">output</span><span class="p">;</span>
<span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="s">"Zoidberg's age is "</span> <span class="o">&lt;&lt;</span> <span class="n">age</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="s">"and his IQ is "</span> <span class="o">&lt;&lt;</span> <span class="n">iq</span> <span class="o">&lt;&lt;</span> <span class="s">"!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="c1">// use the str method to extract the string that was built</span>

<span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="n">output</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="cs-106x-hw1---game-of-life">CS 106X HW1 - Game Of Life</h2>

<p>é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼š</p>

<p>å½“æˆ‘è¯•å›¾ä½¿ç”¨<code class="language-plaintext highlighter-rouge">pass by value</code>çš„æ–¹å¼å°†<code class="language-plaintext highlighter-rouge">ifstream file</code>ä¼ å…¥å‡½æ•°å‚æ•°æ—¶ï¼Œç¨‹åºæŠ¥é”™ï¼š<code class="language-plaintext highlighter-rouge">deleted copy constructor</code>.</p>

<p>åœ¨æŸ¥é˜…äº†ã€ŠC++ Primerã€‹ä¸­æœ‰å…³äºæ‹·è´æ„é€ å‡½æ•°çš„ç›¸å…³å†…å®¹ï¼ˆ<strong>P449</strong>ï¼‰åï¼Œå‘ç°è¿™æ˜¯ç”±äºæŸäº›ç±»ï¼ˆæ¯”å¦‚<code class="language-plaintext highlighter-rouge">ifstream</code>ï¼‰ï¼Œä¹ŸåŒ…æ‹¬<code class="language-plaintext highlighter-rouge">&lt;iostream&gt;</code>åœ¨å®šä¹‰ç±»æ—¶é˜»æ­¢äº†æ‹·è´ï¼Œä»¥é¿å…å¤šä¸ªå¯¹è±¡å†™å…¥æˆ–è€…è¯»å–ç›¸åŒçš„IOç¼“å†²ã€‚åœ¨æ–°æ ‡å‡†ä¸‹ï¼Œå°†æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦å®šä¹‰ä¸º<strong>åˆ é™¤çš„å‡½æ•°</strong>æ¥é˜»æ­¢æ‹·è´ã€‚åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨åè¾¹åŠ ä¸Š<code class="language-plaintext highlighter-rouge">=delete</code>æ¥æŒ‡å‡ºæˆ‘ä»¬å¸Œæœ›å°†å®ƒå®šä¹‰ä¸ºåˆ é™¤çš„ï¼Œæ‰€ä»¥åœ¨<code class="language-plaintext highlighter-rouge">pass by value</code>æ—¶ï¼Œå› ä¸ºè¦è°ƒç”¨ç›¸å…³ç±»çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œå°±ä¼šè¢«é˜»æ­¢æ“ä½œã€‚</p>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="language-plaintext highlighter-rouge">pass by reference</code>æˆ–è€…ç›´æ¥å°†æ–‡ä»¶æ“ä½œæµå®šä¹‰ä¸ºå¼•ç”¨å¯¹è±¡æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109071641937.png" alt="image-20210907164128795" style="zoom: 67%;" /></p>

<h2 id="cs-106x-lecture-4--stacks--queues">CS 106X Lecture 4 â€“ Stacks &amp; Queues</h2>

<h3 id="stack">Stack</h3>

<p>è¯¾å ‚ä¸Šä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­ï¼šå…³äºä½¿ç”¨<code class="language-plaintext highlighter-rouge">stack</code>è¿›è¡Œæ‹¬å·åŒ¹é…åˆ¤æ–­ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109072008180.png" alt="image-20210907200828068" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">checkBalance</span><span class="p">(</span><span class="n">string</span> <span class="n">code</span><span class="p">){</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">stack_code</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">code</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"("</span> <span class="o">||</span> <span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"{"</span><span class="p">)</span> <span class="n">stack_code</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> 
        
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">")"</span> <span class="o">||</span> <span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"}"</span><span class="p">)</span> <span class="n">stack_code</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>è¿™æ ·çš„å¼¹å‡ºä»£ç æ˜¯ä¸å¯¹çš„ï¼Œ<strong>å¿…é¡»åœ¨æ ˆé¡¶æ£€æµ‹åˆ°åŒ¹é…çš„æ‹¬å·ç±»å‹æ—¶ï¼Œæ‰å°†å…¶å¼¹å‡º</strong>ï¼Œå¦‚æœæ­¤æ—¶æ ˆé¡¶æ‹¬å·ç±»å‹ä¸åŒ¹é…ï¼Œè¯´æ˜è¿™æ®µå­—ç¬¦ä¸²æœ¬èº«çš„æ‹¬å·å°±æ˜¯ä¸åŒ¹é…çš„ã€‚åŒæ—¶ï¼Œè€ƒè™‘åˆ°å¯èƒ½å‡ºç°åªæœ‰å·¦æ‹¬å·è€Œæ°¸è¿œæ²¡æœ‰é—­åˆçš„æƒ…å†µï¼Œè¿™æ®µä»£ç åº”åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">checkBalance</span><span class="p">(</span><span class="n">string</span> <span class="n">code</span><span class="p">){</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">stack_code</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">code</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"("</span> <span class="o">||</span> <span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"{"</span><span class="p">)</span> <span class="n">stack_code</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> 
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">")"</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">stack_code</span><span class="p">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s">"("</span><span class="p">)</span> <span class="n">stack_code</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">else</span> <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">"}"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">stack_code</span><span class="p">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s">"{"</span><span class="p">)</span> <span class="n">stack_code</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">else</span> <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stack_code</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span> <span class="k">return</span> <span class="n">code</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="queue">Queue</h3>

<p>ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">mirror</code>é—®é¢˜ï¼š<code class="language-plaintext highlighter-rouge">queue: {a, b, c} -&gt; {a, b, c, c, b, a}</code></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">mirror</span><span class="p">(</span><span class="n">Queue</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">queue</span><span class="p">){</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">mirror_stack</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">queue</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">()){</span>
        <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span>
        <span class="n">mirror_stack</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// q = {}</span>
    
    <span class="c1">// mirror_stack = {a, b, c} top</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä½†ç°åœ¨çš„é—®é¢˜åœ¨äºæƒ³è¦ä¿å­˜åŸæ¥çš„åºåˆ—ï¼Œæ‰€ä»¥è€ƒè™‘åœ¨å¯¹é˜Ÿåˆ—<code class="language-plaintext highlighter-rouge">dequeue</code>çš„åŒæ—¶ï¼ŒæŠŠæ•°æ®ä¿å­˜è¿›è¿™ä¸ªé˜Ÿåˆ—ï¼ˆåŸºäº<strong>FIFO</strong>çš„ç‰¹æ€§ï¼‰:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">mirror</span><span class="p">(</span><span class="n">Queue</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">queue</span><span class="p">){</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">mirror_stack</span><span class="p">;</span>
    <span class="n">Stack</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">mirror_stack</span><span class="p">;</span>
    <span class="c1">// æ”¹ä¸ºforå¾ªç¯</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">queue</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
        <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span>
        <span class="n">mirror_stack</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="c1">// åŠ å…¥queue</span>
        
        <span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// q = {a, b, c} back</span>
    
    <span class="c1">// mirror_stack = {a, b, c} top</span>
    
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">stack</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">()){</span>
        <span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">stack</span><span class="p">.</span><span class="n">pop</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="cs-106x-lecture-5--set--maps">CS 106X Lecture 5 â€“ Set &amp; Maps</h2>

<h3 id="set">Set</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Perform add/remove/search(contains) efficiently</code></li>
  <li><code class="language-plaintext highlighter-rouge">No indexes</code></li>
</ul>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>Sorted or not</th>
      <th>search speed</th>
      <th>implementation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Set</td>
      <td>Sorted order</td>
      <td>fast</td>
      <td>binary tree</td>
    </tr>
    <tr>
      <td>HashSet</td>
      <td>unpredictable order</td>
      <td>pretty fast</td>
      <td>hash table</td>
    </tr>
  </tbody>
</table>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109082204066.png" alt="image-20210908220419659" style="zoom:50%;" /></p>

<p>Setå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªé›†åˆï¼Œå¯ä»¥è¿›è¡Œä¸<code class="language-plaintext highlighter-rouge">string</code>ç±»ç±»ä¼¼çš„æ“ä½œã€‚</p>

<p>éå†æ–¹æ³•ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="n">type</span> <span class="n">name</span><span class="o">:</span> <span class="n">collection</span><span class="p">){</span>
    <span class="n">statements</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>å¦‚æœå®šä¹‰äº†è‡ªå·±çš„structæˆ–è€…classï¼Œæ˜¯ä¸èƒ½ç›´æ¥å¤šæ¬¡åŠ å…¥setçš„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹<code class="language-plaintext highlighter-rouge">&lt;</code>è¿›è¡Œè¿ç®—ç¬¦é‡è½½</p>
</blockquote>

<h3 id="maps">Maps</h3>

<p>ç±»ä¼¼äº<code class="language-plaintext highlighter-rouge">Python</code>çš„å­—å…¸ï¼Œå‚¨å­˜çš„æ˜¯<code class="language-plaintext highlighter-rouge">Pair</code></p>

<p>ç±»å‹ç±»ä¼¼äº<code class="language-plaintext highlighter-rouge">Set</code></p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109082229406.png" alt="image-20210908222905867" style="zoom:50%;" /></p>

<h2 id="cs-106x-lecutre-7-9-basic-recursion">CS 106X Lecutre 7-9 Basic Recursion</h2>

<p>è¿™é‡Œè®°å½•è€å¸ˆä¸Šè¯¾çš„å‡ ä¸ªä¾‹å­ï¼Œæ¯”è¾ƒå…¸å‹çš„è¯´æ˜äº†å¯ä»¥å¯¹éœ€è¦è¿›è¡Œé€’å½’çš„å‡½æ•°æ·»åŠ çš„è¾…åŠ©æ“ä½œï¼š</p>

<h3 id="crawl-file--directory">Crawl file / directory</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109261841096.png" alt="image-20210926184129666" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">crawl</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// both of the two cases need to be printed</span>
    
    <span class="c1">// cout &lt;&lt; filename &lt;&lt; endl;</span>
    
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">getTail</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">isFile</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// base case: normal file</span>
        
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// recursive case: directory</span>
        
        <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">files</span> <span class="o">=</span> <span class="n">listDirectory</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">file</span><span class="o">:</span> <span class="n">files</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// crawl(file);</span>
            
            <span class="n">crawl</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">file</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>åˆ°äº†è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬æ¥è¡¥é½æ¯ä¸ªå¥å­å‰è¾¹çš„ç¼©è¿›ï¼Œé€šè¿‡åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ é»˜è®¤å‚æ•°å®ç°å¯¹é€’å½’ä¸­ç¼©è¿›çš„é€’å¢ï¼Œé€šè¿‡åœ¨<em>for</em>å¾ªç¯ä¸­é€’å¢ç¼©è¿›å‚æ•°æ¥å®ç°é€’å¢ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">crawl</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="n">string</span> <span class="n">indent</span> <span class="o">=</span> <span class="s">""</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">indent</span> <span class="o">&lt;&lt;</span> <span class="n">getTail</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">isFile</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// base case: normal file</span>
        
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// recursive case: directory</span>

        <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">files</span> <span class="o">=</span> <span class="n">listDirectory</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">file</span><span class="o">:</span> <span class="n">files</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// cout &lt;&lt; "    " + indent;</span>

            <span class="n">crawl</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">file</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="s">"    "</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="evaluate">Evaluate</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109262019179.png" alt="image-20210926201916855" style="zoom:50%;" /></p>

<p>æ³¨æ„è¿™é“é¢˜æœ¬èº«å¸¦æœ‰å¾ˆå¤šçš„é™åˆ¶æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›é™åˆ¶æ¡ä»¶å†™å‡ºä¸€ä¸ªæ¯”è¾ƒç®€å•çš„é€’å½’å‡½æ•°ï¼Œè€Œä¸ç”¨å€ŸåŠ©å¤šæ¬¡å¤æ‚çš„æ•°æ®ç»“æ„ï¼›æ‰€ä»¥æˆ‘ä»¬å°è¯•å¢åŠ ä¸€ä¸ªå˜é‡ï¼Œè·Ÿä¸­éå†å­—ç¬¦ä¸²ä½ç½®ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">evaluate</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">exp</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">evaluate_helper</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">evaluate_helper</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">exp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// base case</span>
    
    <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">exp</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// transform from the char to int</span>
        
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">exp</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
        <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// recursive case</span>
    
    <span class="k">else</span> <span class="p">{</span>
        
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>åœ¨æ€è€ƒ<em>recursive case</em>çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æƒ³åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œä»€ä¹ˆæ‰æ˜¯<strong>self-similar problem</strong>ï¼Œå¾ˆæ˜æ˜¾æ¯ä¸€å¯¹æ‹¬å·éƒ½æ˜¯ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">self-similar problem</code>ï¼Œæ‰€ä»¥åœ¨é‡åˆ°è¿™äº›<code class="language-plaintext highlighter-rouge">self-similar problem</code>çš„æ—¶å€™ï¼Œè¿›è¡Œé€’å½’ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">evaluate</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">exp</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">evaluate_helper</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">evaluate_helper</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">exp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">exp</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">exp</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
        <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// recursive case</span>
    
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// this "if" can be deleted, since it is the only other case</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">exp</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'('</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// skip '('</span>
            
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="c1">// operand-&gt;operator-&gt;operand</span>
            
            <span class="c1">// assume this function will return what we want:</span>
            
            <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">evaluate_helper</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
            <span class="kt">char</span> <span class="n">operand</span> <span class="o">=</span> <span class="n">exp</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">evaluate_helper</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">operand</span> <span class="o">==</span> <span class="sc">'+'</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">operand</span> <span class="o">==</span> <span class="sc">'*'</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">left</span> <span class="o">*</span> <span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="c1">// skip ')'</span>
            
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// ')'</span>
        
        <span class="c1">// +, *</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="cs-106x-lecture-10-12-exhaustive-search--backtrack">CS 106X Lecture 10-12 Exhaustive Search &amp; Backtrack</h2>

<h3 id="exhaustive-search">Exhaustive Search</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109282244509.png" alt="image-20210928224457046" style="zoom:50%;" /></p>

<p>ä½¿ç”¨é€’å½’å®ç°ç©·ä¸¾æœç´¢çš„æ–¹æ³•ç±»ä¼¼äºCS 61Aä¸­çš„<em>tree recursion</em>ï¼Œåœ¨æŸä¸€æ—¶é—´èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ï¼ˆæˆ–è€…å¤šç§é€‰æ‹©ï¼‰ï¼Œæ¯ä¸€ç§é€‰æ‹©åˆå¯¹åº”ç€ä¸€ä¸ªä¸åŸé—®é¢˜<em>self-similar</em>çš„é€’å½’é—®é¢˜ã€‚</p>

<p>ç‰¹åˆ«çš„æ˜¯ï¼Œåœ¨è¿™ç§é—®é¢˜é‡Œï¼Œ<em>base case</em>æ›´æ°å½“çš„ç†è§£æ–¹å¼æ˜¯<strong>å·²ç»æ²¡æœ‰å¤šä½™é€‰æ‹©</strong>ã€‚</p>

<p>è¯¾å ‚ä¸Šçš„å‡ ä¸ªä¾‹å­æ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§ï¼Œåœ¨è¿™é‡Œäºˆä»¥è®°å½•ï¼š</p>

<h4 id="printbinary">PrintBinary</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109282250705.png" alt="image-20210928225057402" style="zoom: 33%;" /></p>

<p><em>printBinary(3)</em>ç¬¬ä¸€æ¬¡é€‰æ‹©ï¼ˆ0/1ï¼‰åï¼Œé—®é¢˜ä¾¿è½¬åŒ–ä¸º<em>printBinary(2)</em>ï¼Œæ‰€ä»¥é—®é¢˜çš„åŸºæœ¬æ¡†æ¶æ˜¯ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">printBinary</span><span class="p">(</span><span class="kt">int</span> <span class="n">digits</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">digits</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// there is no more choice</span>
        
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// do something to indicate using 0</span>
        <span class="n">printBinary</span><span class="p">(</span><span class="n">digits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">// do something to indicate using 1</span>
        <span class="n">printBinary</span><span class="p">(</span><span class="n">digits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä¸ºäº†èƒ½å¤Ÿä¿å­˜åˆ°åº•ä½¿ç”¨äº†0è¿˜æ˜¯1çš„è¿™ç§æ•°æ®ï¼Œæˆ‘ä»¬å¯¹å‡½æ•°åšå‡ºå¦‚ä¸‹æ”¹å˜ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">printBinary</span><span class="p">(</span><span class="kt">int</span> <span class="n">digits</span><span class="p">,</span> <span class="n">string</span> <span class="n">prefix</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">digits</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// there is no more choice</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">prefix</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// do something to indicate using 0</span>
        <span class="n">printBinary</span><span class="p">(</span><span class="n">digits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s">"0"</span><span class="p">);</span>
        <span class="c1">// do something to indicate using 1</span>
        <span class="n">printBinary</span><span class="p">(</span><span class="n">digits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s">"1"</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ­£å¦‚åœ¨CS 61Aä¸­çš„æè¿°çš„<em>tree recursion</em>ä¸€æ ·ï¼Œæœ€ç»ˆçš„è°ƒç”¨æ ‘å¦‚ä¸‹ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109282310977.png" alt="image-20210928231012887" style="zoom:33%;" /></p>

<p>è¿™ç§æ ‘è¢«ç§°ä¸º<em>call tree</em>æˆ–è€…<em>decision tree</em>.</p>

<p>å¦‚æœå°†æ­¤é¢˜ä¸­çš„äºŒè¿›åˆ¶æ•°å­—æ”¹ä¸ºåè¿›åˆ¶æ•°å­—ï¼Œé‚£ä¹ˆæœ€å¥½å€ŸåŠ©äº<em>for</em>å¾ªç¯è§„èŒƒä»£ç ï¼ˆä¹Ÿä¸CS 61Aä¸­æ•™æˆçš„æ–¹æ³•ç›¸åŒï¼‰ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">printDecimal</span><span class="p">(</span><span class="kt">int</span> <span class="n">digits</span><span class="p">,</span> <span class="n">string</span> <span class="n">prefix</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">digits</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">prefix</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">printDecimal</span><span class="p">(</span><span class="n">digits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">integerToString</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="permutations">Permutations</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109282315249.png" alt="image-20210928231528658" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">permute</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">string</span> <span class="n">prefix</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">""</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">prefix</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// æ¯ä¸€ä¸ªå­—æ¯éƒ½å¯ä»¥ä½œä¸ºç¬¬ä¸€ä¸ªå­—æ¯å‡ºç°</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">char</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="c1">// å°†é€‰å®šçš„å­—æ¯ä»åºåˆ—ä¸­å»é™¤ï¼Œä¹‹åä¸å†å‡ºç°</span>
            <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="n">permute</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">cur</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠæ‰€æœ‰çš„ç»“æœä¿å­˜èµ·æ¥ï¼Œåˆ™éœ€è¦å€ŸåŠ©æ•°æ®ç»“æ„å’Œä¸€ä¸ª<em>helper</em>å‡½æ•°ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">permute</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">;</span>
    <span class="n">permuteHelper</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">permute</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">string</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">""</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// cout &lt;&lt; prefix &lt;&lt; endl;</span>
        <span class="n">v</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">prefix</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// æ¯ä¸€ä¸ªå­—æ¯éƒ½å¯ä»¥ä½œä¸ºç¬¬ä¸€ä¸ªå­—æ¯å‡ºç°</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">char</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="c1">// å°†é€‰å®šçš„å­—æ¯ä»åºåˆ—ä¸­å»é™¤ï¼Œä¹‹åä¸å†å‡ºç°</span>
            <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="n">permute</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">cur</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="backtracking">Backtracking</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291113975.png" alt="image-20210929111320535" style="zoom:50%;" /></p>

<p>ä¸ç©·ä¸¾æ‰€ä¸åŒçš„æ˜¯ï¼Œåœ¨å›æº¯é—®é¢˜ä¸­ï¼Œå› ä¸ºåœ¨é€’å½’ä¹‹åå¯èƒ½æ”¹å˜äº†åŸæœ¬æ•°æ®çš„ç»„æˆç»“æ„å’ŒçŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¿›è¡Œ<em>un-choose</em>ã€‚æˆ–è€…è¯´æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°æŸäº›æƒ…å†µï¼Œå¯¼è‡´éœ€è¦èˆå¼ƒæ‰å½“å‰çš„é€‰æ‹©ï¼Œå¹¶å›é€€åˆ°ä¸Šä¸€æ­¥é‡æ–°è¿›è¡Œé€‰æ‹©ã€‚</p>

<p>å›æº¯ç®—æ³•ä¸€èˆ¬åˆ†ä¸ºä¸‰æ­¥ï¼š</p>

<ul>
  <li><strong>choose</strong></li>
  <li><strong>explore</strong></li>
  <li><strong>un-choose</strong></li>
</ul>

<h4 id="dice-rolls">Dice rolls</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291753463.png" alt="image-20210929175333015" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">diceRolls</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
    <span class="n">diceHelper</span><span class="p">(</span><span class="n">dice</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">diceHelper</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">chosen</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">chosen</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        	<span class="c1">// choose</span>
            <span class="n">chosen</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="c1">// search/explore</span>
            <span class="n">diceHelper</span><span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">chosen</span><span class="p">);</span>
            <span class="c1">// un-choose</span>
            <span class="n">chosen</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦<code class="language-plaintext highlighter-rouge">un-choose</code>çš„æ­¥éª¤ï¼Ÿ</p>

<blockquote>
  <p>å› ä¸ºæˆ‘ä»¬éœ€è¦å‚¨å­˜çš„æ˜¯æ¯ä¸€ç§å•ç‹¬çš„é€‰æ‹©ç»„åˆï¼Œåœ¨<code class="language-plaintext highlighter-rouge">explore</code>çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ”¹å˜äº†<code class="language-plaintext highlighter-rouge">chosen</code>ä¸­çš„æ•°æ®å­˜å‚¨ï¼Œå¦‚æœä¸è¿›è¡Œ<code class="language-plaintext highlighter-rouge">un-choose</code>çš„æ­¥éª¤ï¼Œé‚£ä¹ˆ<code class="language-plaintext highlighter-rouge">chosen</code>çš„æ•°æ®ä¼šä¸€ç›´ä¿å­˜ä¸‹æ¥ã€‚è€Œåœ¨è¿™é‡Œï¼Œ<code class="language-plaintext highlighter-rouge">un-choose</code>çš„æ­¥éª¤åˆšå¥½èƒ½å¤Ÿå»é™¤åœ¨æ¯ä¸€æ¬¡è¿è¡Œä¸­æ·»åŠ åœ¨<code class="language-plaintext highlighter-rouge">chosen</code>ä¸­çš„å…ƒç´ ã€‚</p>
</blockquote>

<p>ä¸ºä»€ä¹ˆåœ¨<code class="language-plaintext highlighter-rouge">exhaustive search</code>ä¸­çš„<code class="language-plaintext highlighter-rouge">permutations</code>ä¸éœ€è¦<code class="language-plaintext highlighter-rouge">un-choose</code>çš„æ­¥éª¤ï¼Ÿ</p>

<blockquote>
  <p>å› ä¸ºåœ¨é‚£é“é¢˜ç›®ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">prefix</code>ä¸æ˜¯æŒ‰å¼•ç”¨ä¼ é€’çš„ï¼Œè€Œåœ¨è¿™é“é¢˜ç›®ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">vector</code>æŒ‰ç…§å¼•ç”¨ä¼ é€’ã€‚</p>
</blockquote>

<h4 id="dice-roll-sum">Dice roll sum</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291825366.png" alt="image-20210929182500986" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜ç›®æ¯”è¾ƒå®¹æ˜“èƒ½æƒ³åˆ°ä½¿ç”¨å›æº¯æ³•åšäº†ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">diceSum</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
    <span class="n">diceHelper</span><span class="p">(</span><span class="n">dice</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">diceSumHelper</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">,</span> <span class="kt">int</span> <span class="n">desiredSum</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">chosen</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if there is no choice to make</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sumAll</span><span class="p">(</span><span class="n">chosen</span><span class="p">)</span> <span class="o">==</span> <span class="n">desiredSum</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">chosen</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        	<span class="c1">// choose</span>
            <span class="n">chosen</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="c1">// search/explore</span>
            <span class="n">diceHelper</span><span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">desiredSum</span><span class="p">,</span> <span class="n">chosen</span><span class="p">);</span>
            <span class="c1">// un-choose</span>
            <span class="n">chosen</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä½†æ˜¯è¿™ä¸ªè§£æ³•ä¸­æ¯«æ— ç–‘é—®ç»è¿‡äº†å¤šæ¬¡æ²¡æœ‰å¿…è¦çš„å‡½æ•°è¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬å…ˆæ˜¯è®¡ç®—å‡ºäº†æ‰€æœ‰çš„å¯èƒ½çš„ç»„åˆï¼Œä¹‹ååªæŠŠç¬¦åˆæ¡ä»¶çš„è¾“å‡ºäº†ï¼Œè€Œæˆ‘ä»¬æœ¬å¯ä»¥ç›´æ¥æ ¹æ®å’Œçš„æƒ…å†µèˆå¼ƒä¸€äº›å€¼ï¼Œä¸ç»§ç»­è¿›è¡Œå‡½æ•°å¾ªç¯ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291832681.png" alt="image-20210929183243297" style="zoom:50%;" /></p>

<p>ï¼ˆçº¢è‰²æ ‡æ³¨çš„å‡æ˜¯å¯ä»¥èˆå¼ƒçš„æƒ…å†µï¼‰</p>

<p>æ‰€ä»¥è¿™é‡Œå°±ç”¨åˆ°äº†å›æº¯ç®—æ³•ä¸­ç»å¸¸ç»“åˆçš„ä¸€ä¸ªæ“ä½œï¼šå‰ªææ“ä½œã€‚</p>

<blockquote>
  <ol>
    <li>computing sum over and over is wasteful</li>
    <li>donâ€™t explore decision trees where values are too low/high</li>
  </ol>
</blockquote>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">diceSum</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
    <span class="n">diceSumHelper</span><span class="p">(</span><span class="n">dice</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">diceSumHelper</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">,</span> <span class="kt">int</span> <span class="n">desiredSum</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">chosen</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if there is no choice to make</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">desiredSum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">chosen</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">desiredSum</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">desiredSum</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">max</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">min</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// choose</span>
                <span class="n">chosen</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
                <span class="c1">// search/explore</span>
                <span class="n">diceHelper</span><span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">desiredSum</span> <span class="o">-</span> <span class="n">i</span><span class="p">,</span> <span class="n">chosen</span><span class="p">);</span>
                <span class="c1">// un-choose</span>
                <span class="n">chosen</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¦‚æœæˆ‘ä»¬å†å¯¹æ­¤é¢˜è¿›è¡Œæ”¹ç¼–ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291855559.png" alt="image-20210929185557443" style="zoom:50%;" /></p>

<p>å¯ä»¥æƒ³åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‚æ•°æ¥ä¿å­˜å‰ä¸€ä¸ªåªï¼Œå¹¶ä¿è¯å½“å‰è¦é€‰æ‹©çš„å€¼å¿…é¡»ä¸å°äºå‰ä¸€ä¸ªå€¼ï¼Œä¹‹åå°†è¯¥å‚æ•°æ›´æ–°ä¸ºæ­¤æ¬¡é€‰æ‹©çš„å€¼ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">diceSum</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
    <span class="n">diceSumHelper</span><span class="p">(</span><span class="n">dice</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">diceSumHelper</span><span class="p">(</span><span class="kt">int</span> <span class="n">dice</span><span class="p">,</span> <span class="kt">int</span> <span class="n">desiredSum</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">chosen</span><span class="p">,</span> <span class="kt">int</span> <span class="n">curMinValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if there is no choice to make</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">desiredSum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">chosen</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// update the for iteration</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">curMinValue</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// also update this formula</span>
            <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">desiredSum</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">desiredSum</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">max</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">min</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// choose</span>
                <span class="n">chosen</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
                <span class="c1">// search/explore</span>
                <span class="n">diceHelper</span><span class="p">(</span><span class="n">dice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">desiredSum</span> <span class="o">-</span> <span class="n">i</span><span class="p">,</span> <span class="n">chosen</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
                <span class="c1">// un-choose</span>
                <span class="n">chosen</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="subsets">Subsets</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291904509.png" alt="image-20210929190436410" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜å¾ˆå®¹æ˜“å‡ºç°çš„é”™è¯¯æ˜¯<code class="language-plaintext highlighter-rouge">vector</code>ä¸­å…ƒç´ é¡ºåºä¸ä¸€æ ·ï¼Œä½†æ˜¯å«æœ‰çš„å…ƒç´ æ˜¯ä¸€æ ·çš„ï¼Œå³ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109291918105.png" alt="image-20210929191812011" style="zoom:50%;" /></p>

<p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‡ºç°ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠåšé€‰æ‹©çš„ä¾æ®å˜æ›´ä¸ºï¼š<strong>æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </strong>ï¼Œè€Œéå…ˆåŒ…å«å“ªä¸ªå…ƒç´ ã€‚æ‰€ä»¥è¿™é“é¢˜ç›®é‡Œä¸åº”å½“ä½¿ç”¨<em>for</em>å¾ªç¯ï¼Œå¦åˆ™ä¼šé€ æˆé‡å¤é€‰æ‹©ï¼Œæ­£ç¡®çš„<em>decision tree</em>å¦‚ä¸‹ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109292036843.png" alt="image-20210929203639731" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">subsets</span><span class="p">(</span><span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">chosen</span><span class="p">;</span>
    <span class="n">sublistHelper</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">chosen</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">chosen</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">sublistHelper</span><span class="p">(</span><span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">chosen</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">chosen</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// choose</span>
        <span class="n">string</span> <span class="n">mine</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">v</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="c1">// explore/search</span>
        
        <span class="c1">// Yes, include them</span>
        <span class="n">chosen</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">mine</span><span class="p">);</span>
        <span class="n">sublistHelper</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">chosen</span><span class="p">);</span>
        <span class="c1">// No, exclude them</span>
        <span class="n">chosen</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">chosen</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">subslitHelper</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">chosen</span><span class="p">);</span>
        
        <span class="c1">// un-choose</span>
        <span class="n">v</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">mine</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="8-queens-problem">8 Queens Problem</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109292054905.png" alt="image-20210929205442510" style="zoom:50%;" /></p>

<p>ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„å‡ºå‘ç‚¹æ˜¯è§‚å¯Ÿåˆ°åœ¨æ¯ä¸€è¡Œä»¥åŠæ¯ä¸€åˆ—ï¼Œä¸€å®šå­˜åœ¨å¹¶ä¸”ä»…å­˜åœ¨ä¸€ä¸ª<em>queen</em>ã€‚è€ƒè™‘æ¯ä¸€è¡Œï¼ˆæˆ–è€…æ¯ä¸€åˆ—ï¼‰ï¼Œç„¶åå¯¹å…¶ä¸­çš„æ¯ä¸€åˆ—ï¼ˆæ¯ä¸€è¡Œï¼‰çš„ç‚¹é€ä¸ªåˆ¤å®šæ˜¯å¦æ˜¯å¯ä»¥æ‘†æ”¾çš„ç‚¹ï¼ˆæ˜¯å¦å®‰å…¨ï¼‰ï¼Œæ•´ä½“ä¸Šä½¿ç”¨å›æº¯æ³•è§£å†³ï¼šå¦‚æœå½“å‰è¡Œï¼ˆåˆ—ï¼‰æ»¡è¶³æ¡ä»¶ï¼ˆå¯ä»¥æ‘†æ”¾ï¼‰ï¼Œé‚£ä¹ˆå°±ç»§ç»­æ¢ç´¢ï¼ˆåæ ‡ç§»åˆ°ä¸‹ä¸€è¡Œï¼ˆåˆ—ï¼‰ï¼‰ï¼Œå¦åˆ™å°†æ¿ä¸Šçš„çš‡åå»æ‰ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">solveQueensHelper</span><span class="p">(</span><span class="n">Board</span><span class="o">&amp;</span> <span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// base case</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">board</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">row</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">isSafe</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">// choose</span>
                <span class="n">board</span><span class="p">.</span><span class="n">place</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
                <span class="c1">// explore</span>
                <span class="n">solveQueensHelper</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                <span class="c1">// un-choose</span>
                <span class="n">board</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¦‚æœæˆ‘ä»¬æƒ³è®©ç¨‹åºä»…è¾“å‡ºä¸€ä¸ªæ­£ç¡®ç»“æœï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">solveQueensHelper</span><span class="p">(</span><span class="n">Board</span><span class="o">&amp;</span> <span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// base case</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">board</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">row</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">isSafe</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">// choose</span>
                <span class="n">board</span><span class="p">.</span><span class="n">place</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
                <span class="c1">// explore</span>
                <span class="kt">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="n">solveQueensHelper</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// un-choose</span>
                <span class="n">board</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="travel">Travel</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202109292112528.png" alt="image-20210929211245120" style="zoom:50%;" /></p>

<p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ª<em>backtracking</em>çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨ç©·ä¸¾æœç´¢çš„åŸºç¡€ä¸Šï¼Œä¼šå­˜åœ¨ä¸€äº›<em>bad case</em>ä½¿å¾—æˆ‘ä»¬æ— æ³•åˆ°è¾¾ç›®æ ‡æŒ‡å®šä½ç½®ï¼Œé‚£æˆ‘ä»¬éœ€è¦å›æº¯åˆ°ä¸Šä¸€æ­¥çš„ä½ç½®ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">travel</span><span class="p">(</span><span class="k">const</span> <span class="n">GPoint</span> <span class="o">&amp;</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GPoint</span> <span class="n">origin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
    <span class="n">travelHelper</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">travelHelper</span><span class="p">(</span><span class="k">const</span> <span class="n">GPoint</span><span class="o">&amp;</span> <span class="n">target</span><span class="p">,</span> <span class="n">GPoint</span> <span class="n">me</span><span class="p">,</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">target</span> <span class="o">==</span> <span class="n">me</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">path</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">me</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span>
            <span class="o">&amp;&amp;</span> <span class="n">me</span><span class="p">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">.</span><span class="n">getY</span><span class="p">()){</span>
        <span class="c1">// choose</span>
        <span class="n">path</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"N"</span><span class="p">);</span>
        <span class="n">GPoint</span> <span class="n">n</span><span class="p">(</span><span class="n">me</span><span class="p">.</span><span class="n">getX</span><span class="p">(),</span> <span class="n">me</span><span class="p">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">// explore</span>
        <span class="n">travelHelper</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="c1">// un-choose</span>
        <span class="n">path</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">// choose</span>
        <span class="n">path</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"E"</span><span class="p">);</span>
        <span class="n">GPoint</span> <span class="n">e</span><span class="p">(</span><span class="n">me</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">me</span><span class="p">.</span><span class="n">getY</span><span class="p">());</span>
        <span class="c1">// explore</span>
        <span class="n">travelHelper</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="c1">// un-choose</span>
        <span class="n">path</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">// choose</span>
        <span class="n">path</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"NE"</span><span class="p">);</span>
        <span class="n">GPoint</span> <span class="n">ne</span><span class="p">(</span><span class="n">me</span><span class="p">.</span><span class="n">getX</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">me</span><span class="p">.</span><span class="n">getY</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">// explore</span>
        <span class="n">travelHelper</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">ne</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="c1">// un-choose</span>
        <span class="n">path</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="assignment-4--section-3">Assignment 4 &amp; Section 3</h2>

<h3 id="longestcommonsubsequence">longestCommonSubsequence</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110082238743.png" alt="image-20211008223819618" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜ç±»ä¼¼äº<strong>Assignment 4</strong>çš„æœ€åä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯ä¸€ä¸ª<em>subSet</em>é—®é¢˜ã€‚è¿™ç§é—®é¢˜çš„ä¸€èˆ¬æƒ³æ³•æ˜¯ï¼š<strong>å¯¹äºæŸä¸ªä½ç½®çš„æŸä¸ªå…ƒç´ ï¼Œinclude or not?</strong> ä¹‹åå†é’ˆå¯¹<strong>include/not include</strong>çš„ä¸¤ç§æƒ…å†µçš„å¤§å°æˆ–è€…å…¶ä»–æ¡ä»¶ï¼Œå°†å„è‡ªä½œä¸ºè¿”å›å€¼ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110082242585.png" alt="image-20211008224203512" style="zoom:50%;" /></p>

<h3 id="partitionable">partitionable</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110082245138.png" alt="image-20211008224547075" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜çš„è§£æ³•ä¸æ­¢ä¸€ç§ï¼Œæœ€åˆæˆ‘çš„æ–¹æ³•æ˜¯å°†è¿™é“é¢˜è½¬åŒ–ä¸º<strong>dicsSum</strong>æ¥åšï¼Œè€Œç­”æ¡ˆåˆ™æ˜¯è½¬åŒ–æˆäº†ä¸€ä¸ªç±»ä¼¼äº<strong>include or not</strong>çš„æ–¹æ³•æ¥åšï¼šå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŠ å…¥<em>sum1</em>æˆ–è€…é€‰æ‹©åŠ å…¥<em>sum2</em>ï¼Œç­”æ¡ˆçš„å†™æ³•æ˜¯æ¯”è¾ƒç²¾å¦™çš„ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110082258439.png" alt="image-20211008225858366" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜çš„å¤„ç†è®©æˆ‘æƒ³èµ·åœ¨CS 61Aä¸­æœŸæœ«å¤ä¹ é¢˜ä¸­çš„ä¸€é“é¢˜ç›®(<em>lab14 q4</em>)ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110101937614.png" alt="image-20211010193749484" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥åšï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">subSeq</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">test</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">test1</span> <span class="o">=</span> <span class="n">test</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">subSeqHelepr</span><span class="p">(</span><span class="n">test1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">subSeqHelepr</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">test</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">abs</span><span class="p">(</span><span class="n">sum1</span> <span class="o">-</span> <span class="n">sum2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">d</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">test</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">subSeqHelepr</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sum1</span> <span class="o">+</span> <span class="n">first</span><span class="p">,</span> <span class="n">sum2</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="o">+</span> <span class="n">subSeqHelepr</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sum1</span><span class="p">,</span> <span class="n">sum2</span> <span class="o">+</span> <span class="n">first</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>
        <span class="n">test</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">test</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">first</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="listtwiddles">listTwiddles</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110082315281.png" alt="image-20211008231534220" style="zoom:50%;" /></p>

<p>æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›æ•°æ®é‡æ¯”è¾ƒå¤§çš„é€’å½’é—®é¢˜ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„é€‰æ‹©ä¸åº”å½“æ˜¯åœ¨å‡½æ•°ä¸­ç›´æ¥éå†ï¼Œæ¯”å¦‚æ­¤é¢˜ä¸­çš„<strong>lexicon</strong>ï¼Œä¹Ÿæ¯”å¦‚åœ¨<strong>Assignment 4</strong>çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åº”å½“éå†çš„éƒ½æ˜¯é’ˆå¯¹é¢˜ç›®æ‰€è°“çš„<em>neighbors</em>ã€‚åœ¨<strong>Assignment 4</strong>ä¸­ï¼Œå¯¹å¤§æ•°æ®é›†<strong>unCovered</strong>çš„å¤„ç†æ˜¯é€šè¿‡æ”¹å˜å‡½æ•°å‚æ•°ï¼Œå°†æ­¤æ¬¡å‡½æ•°ä½¿ç”¨çš„<em>neighbors</em>å»é™¤å®ç°çš„ï¼›è€Œåœ¨æœ¬é¢˜ä¸­ï¼Œåˆ™å¢åŠ äº†ä¸€ä¸ªå‚æ•°<em>index</em>æ¥å®ç°å¯¹<strong>Lexicon</strong>çš„æŒç»­éå†ã€‚</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110082330256.png" alt="image-20211008233002175" style="zoom:50%;" /></p>

<h2 id="section-4--5---linked-list">Section 4 &amp; 5 - linked list</h2>

<h3 id="reverse-linked-list">reverse linked list</h3>

<p>é¦–å…ˆé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥å±•ç¤ºé“¾è¡¨åè½¬çš„è¿‡ç¨‹ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110231731953.png" alt="image-20211023173136897" style="zoom:50%;" /></p>

<p>ä¸ºäº†å®ç°é“¾è¡¨åè½¬ï¼Œæˆ‘ä»¬éœ€è¦ä»æœ«å°¾å…¥æ‰‹ï¼Œè¿™å…¶å®ä¹Ÿæ¯”è¾ƒåƒæ˜¯é€’å½’çš„æ€è·¯ï¼Œå…ˆéå†åˆ°æœ€åï¼Œå†å›æº¯åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨é€’å½’ä»£ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>åœ¨æ­¤ä¾‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç¿»è½¬è¿™ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦åšå¦‚ä¸‹æ“ä½œï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// set the pointer at the end of the list</span>
<span class="n">listNode</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="c1">// connect one node to the new temp node</span>
<span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="c1">// 4-&gt;5</span>
<span class="n">list</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">list</span><span class="p">;</span>
<span class="c1">// set the end of null</span>
<span class="n">list</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
<span class="n">list</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
</code></pre></div></div>

<p>é€šè¿‡ä¸Šå›¾æ‰€ç¤ºè¿™ç§ï¼Œè‡ªåå¾€å‰çš„åè½¬æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†é—®é¢˜æ‰©å±•åˆ°å¦‚ä¸‹ä¸‰ä¸ªå±‚æ¬¡ï¼šå¹¶åˆ†åˆ«ä½œäº†å¦‚ä¸‹è§£æï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110231741380.PNG" alt="IMG_0269" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ä¸€ä¸ªåè½¬é“¾è¡¨çš„å‡½æ•°å˜ä½“</span>
<span class="kt">void</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">listNode</span><span class="o">*&amp;</span> <span class="n">front</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">front</span> <span class="o">==</span> <span class="nb">nullptr</span> <span class="o">||</span> <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">listNode</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="c1">// å› ä¸ºæ˜¯ä¼ é€’å¼•ç”¨ï¼Œæ‰€ä»¥æœ€ç»ˆtempçš„å€¼ä¼šç­‰äºæœ€åä¸€ä¸ªelement</span>
    <span class="n">reverse</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
    <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">front</span><span class="p">;</span>
    <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="c1">// è®¾ç½®æ–°çš„é“¾è¡¨å¤´éƒ¨ä½ç½®</span>
    <span class="n">front</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="remove-elements">remove elements</h3>

<p>ä¹‹æ‰€ä»¥æŠŠè¿™ä¸€æ¡å•ç‹¬åˆ—å‡ºæ¥ï¼Œæ˜¯å› ä¸ºåœ¨åˆ é™¤å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸éœ€è¦å°†<strong>åˆ é™¤é“¾è¡¨çš„å¤´éƒ¨å…ƒç´ </strong>è¿™ä¸€æ“ä½œä»åˆ é™¤è¿‡ç¨‹ä¸­ç‹¬ç«‹å‡ºæ¥ã€‚åŒæ—¶ï¼Œåœ¨åˆ é™¤å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦æ³¨æ„ä¸è¦éå†åˆ°é“¾è¡¨çš„<code class="language-plaintext highlighter-rouge">nullptr</code>ä½ç½®ï¼Œå¦åˆ™æ— æ³•å°†é“¾è¡¨å‰åç›¸äº’è¿æ¥èµ·æ¥ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">removeAllThreshold</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*&amp;</span> <span class="n">front</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">threshold</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// deal with the front delete case</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">front</span> <span class="o">!=</span> <span class="nb">nullptr</span> <span class="o">&amp;&amp;</span> <span class="n">front</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&gt;=</span> <span class="n">value</span> <span class="o">-</span> <span class="n">threshold</span> 
          				   <span class="o">&amp;&amp;</span> <span class="n">front</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">+</span> <span class="n">threshold</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">listNode</span><span class="o">*</span> <span class="n">trash</span> <span class="o">=</span> <span class="n">front</span><span class="p">;</span>
        <span class="n">front</span> <span class="o">=</span> <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">delete</span> <span class="n">trash</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// normal delete case</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">front</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">listNode</span><span class="o">*</span> <span class="n">current</span> <span class="o">=</span> <span class="n">front</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">list</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&gt;=</span> <span class="n">value</span> <span class="o">-</span> <span class="n">threshold</span>
                <span class="o">&amp;&amp;</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">+</span> <span class="n">threshold</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">listNode</span><span class="o">*</span> <span class="n">trash</span> <span class="o">=</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="k">delete</span> <span class="n">trash</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="split">split</h3>

<p>å°†é“¾è¡¨ä¸­çš„æ•°æ®åˆ†ç»„ï¼Œæ¯”å¦‚åˆ†ä¸ºæ­£æ•°å’Œè´Ÿæ•°ï¼Œ<strong>ä¸”åœ¨æ“ä½œè¿‡ç¨‹ä¸­ä¸åˆ›å»ºä»»ä½•æ–°èŠ‚ç‚¹</strong>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å¯¹è¿æ¥é“¾è¡¨å‰åæ•°æ®çš„æŒ‡é’ˆè¿›è¡Œä¸æ–­çš„è°ƒæ•´å’Œç§»åŠ¨ï¼šæ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼Œå½“é‡åˆ°ä¸€ä¸ªè´Ÿæ•°æ—¶ï¼Œå°±æŠŠè¯¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®åœ¨å½“å‰çš„<code class="language-plaintext highlighter-rouge">front</code>ä½ç½®ï¼Œåœ¨æ“ä½œç»“æŸåï¼Œå°±æŠŠ<code class="language-plaintext highlighter-rouge">front</code>è®¾ç½®åˆ°å½“å‰èŠ‚ç‚¹çš„ä½ç½®ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œè´Ÿæ•°èŠ‚ç‚¹ä¾¿å¯ä»¥è¿æ¥åœ¨ä¸€èµ·ï¼Œç´§éšå…¶åçš„æ˜¯éè´Ÿæ•°èŠ‚ç‚¹ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">split</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*&amp;</span> <span class="n">front</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">front</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">listNode</span><span class="o">*</span> <span class="n">current</span> <span class="o">=</span> <span class="n">front</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">listNode</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">front</span><span class="p">;</span>
                <span class="n">front</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="braid">braid</h3>

<p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¦å°†å…ˆå‰çš„é“¾è¡¨ä¸ç¿»è½¬ä¹‹åçš„é“¾è¡¨<strong>äº¤å‰</strong>è¿æ¥åœ¨ä¸€èµ·ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110240001451.png" alt="image-20211024000150386" style="zoom:50%;" /></p>

<p><strong>æ­¤ç±»é¢˜ç›®ï¼Œæˆ‘ä»¬å¸¸éœ€è¦ç”¨åˆ°stackã€queueç­‰æ•°æ®ç»“æ„ã€‚è€Œåœ¨æœ¬é¢˜ä¸­ï¼Œå¯ä»¥é¢„æƒ³åˆ°çš„æ€è·¯æ˜¯å…ˆéå†åˆ°åŸé“¾è¡¨æœ«å°¾ï¼Œä¹‹åæŠŠå¤´éƒ¨å…ƒç´ åŠ å…¥ï¼Œè¿™å°±éœ€è¦FIFOçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åº”å½“ä½¿ç”¨é˜Ÿåˆ—è€Œéå †æ ˆã€‚</strong></p>

<blockquote>
  <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ€è€ƒåœ¨é“¾è¡¨æœ«å°¾æ·»åŠ å…ƒç´ çš„<em>simple case</em>æ¥éªŒè¯æ­£ç¡®æ€§</p>
</blockquote>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">braid</span><span class="p">(</span><span class="n">listNode</span><span class="o">*</span> <span class="n">front</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="p">;</span>
    <span class="n">braidHelper</span><span class="p">(</span><span class="n">front</span><span class="p">,</span> <span class="n">numbers</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">braidHelper</span><span class="p">(</span><span class="n">listNode</span><span class="o">*</span> <span class="n">front</span><span class="p">,</span> <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">numbers</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// base case</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">front</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">numbers</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">front</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
    <span class="c1">// use recursion to store all nodes' data in the queue</span>
    <span class="n">braidHelper</span><span class="p">(</span><span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">numbers</span><span class="p">);</span>
    <span class="c1">// insert the node's data into the right position in the current linked list</span>
    <span class="n">listNode</span><span class="o">*</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">listNode</span><span class="p">(</span><span class="n">numbers</span><span class="p">.</span><span class="n">dequeue</span><span class="p">(),</span> <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">);</span>
    <span class="c1">// connect the list</span>
    <span class="n">front</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="å¥‡å¶é“¾è¡¨">å¥‡å¶é“¾è¡¨</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111022321002.png" alt="image-20211102232106911" style="zoom:50%;" /></p>

<p>å¯ä»¥æƒ³åˆ°ï¼Œé™¤äº†åŸæŒ‡é’ˆ<code class="language-plaintext highlighter-rouge">list1</code>ä¹‹å¤–ï¼Œæˆ‘ä»¬è‡³å°‘è¿˜éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ç”¨äºå¯¹å¶æ•°ä½èŠ‚ç‚¹çš„è·Ÿéšä¸ä¹‹åçš„éå†ï¼›åŒæ ·åœ°ï¼Œä¸ºäº†è·Ÿéšå¥‡æ•°ä½èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å†åˆ›ç«‹ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼ˆè¿™ä¸ªé¢˜æœ€å¥½çš„è§£æ³•å°±æ˜¯æŠŠå›¾ç”»å‡ºæ¥ï¼Œå¯¹ç…§ç€å†™ç ï¼‰ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ListNode</span><span class="o">*</span> <span class="nf">transferEvens</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*&amp;</span> <span class="n">list1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">list1</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// the head for even sequence</span>
    <span class="n">ListNode</span><span class="o">*</span> <span class="n">list2</span> <span class="o">=</span> <span class="n">list1</span><span class="p">;</span>
    <span class="c1">// the head for odd sequence</span>
    <span class="n">list1</span> <span class="o">=</span> <span class="n">list1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="c1">// keep track of the even sequence</span>
    <span class="n">ListNode</span><span class="o">*</span> <span class="n">even</span> <span class="o">=</span> <span class="n">list2</span><span class="p">;</span>
    <span class="c1">// keep track of the odd sequence</span>
    <span class="n">ListNode</span><span class="o">*</span> <span class="n">odd</span> <span class="o">=</span> <span class="n">list1</span><span class="p">;</span>
    <span class="c1">// start traversing:</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">odd</span> <span class="o">!=</span> <span class="nb">nullptr</span> <span class="o">&amp;&amp;</span> <span class="n">odd</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!+</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">even</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">odd</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">even</span> <span class="o">=</span> <span class="n">even</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">odd</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">even</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">odd</span> <span class="o">=</span> <span class="n">odd</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">even</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">list2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="section-6---binary-search-tree">Section 6 - Binary Search Tree</h2>

<h3 id="isbst">IsBST</h3>

<p>è¿™ä¸ªç±»å‹çš„é¢˜ç›®åœ¨<strong>Berkeley CS 61A</strong>ä¸­è§åˆ°è¿‡ï¼Œè¿™é‡Œç»™å‡ºå®Œæ•´çš„åˆ¤å®šæ–¹æ³•ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">isBST</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">min</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&lt;=</span> <span class="n">min</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&gt;=</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">isBST</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">min</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isBST</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="n">max</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="wordexists">WordExists</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110241604158.png" alt="image-20211024160439063" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜æˆ‘çš„æ€è·¯æ˜¯å°†å…¶ç†è§£ä¸ºä¸€ä¸ªå›æº¯é—®é¢˜ï¼Œå› ä¸ºå®ƒå¹¶ä¸è¦æ±‚å•è¯çš„èµ·å§‹èŠ‚ç‚¹ä½äºæ ¹èŠ‚ç‚¹å¤„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åœ¨æŸä¸€åˆ†æ”¯ä¸­æ²¡æœ‰å®Œå…¨åŒ¹é…è¯¥å•è¯æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ°å¦ä¸€åˆ†æ”¯ä¸­å¯»æ‰¾<strong>åŸå•è¯</strong>ã€‚åŸºäºè¿™ç§è€ƒè™‘ï¼Œè®¾ç½®ä¸€ä¸ªè¾…åŠ©å‚æ•°ï¼Œä¿ç•™æœªç»æ›´æ”¹çš„åŸå•è¯ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">wordExists</span><span class="p">(</span><span class="n">TreeNodeChar</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">word</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">wordExistsHelper</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">word</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="nf">wordExistsHelper</span><span class="p">(</span><span class="n">TreeNodeChar</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="n">string</span> <span class="n">originalWord</span><span class="p">,</span> <span class="n">string</span> <span class="n">word</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="c1">// is now we found a match char</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
        <span class="c1">// choose</span>
        <span class="k">return</span> <span class="n">wordExistsHelper</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">originalWord</span><span class="p">,</span> <span class="n">word</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">||</span>
                <span class="n">wordExistsHelper</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">originalWord</span><span class="p">,</span> <span class="n">word</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// un-choose</span>
        <span class="k">return</span> <span class="n">wordExistsHelper</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">originalWord</span><span class="p">,</span> <span class="n">originalWord</span><span class="p">)</span> <span class="o">||</span>
                <span class="n">wordExistsHelper</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">originalWord</span><span class="p">,</span> <span class="n">originalWord</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä¿ç•™åŸæœ¬çš„å•è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†åœ¨æŸä¸€åˆ†æ”¯ä¸­åˆ¤å®šæ˜¯å¦å­˜åœ¨å®Œç¾åŒ¹é…çš„å•è¯è¿™ä¸€è¿‡ç¨‹ç‹¬ç«‹å‡ºæ¥ï¼Œå¦åˆ™ä¼šå‡ºç°è¯¯åˆ¤çš„æƒ…å†µï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// helper to search the given subtree for the rest of the string bool </span>
<span class="n">suffixExists</span><span class="p">(</span><span class="n">TreeNodeChar</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">suffix</span><span class="p">)</span> <span class="p">{</span> 
   <span class="k">if</span> <span class="p">(</span><span class="n">suffix</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> 
    <span class="p">}</span> 
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> 
    <span class="p">}</span> 
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">suffix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> 
    <span class="p">}</span> 
    <span class="k">else</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="n">suffixExists</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span>  <span class="n">suffix</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">||</span> 
            <span class="n">suffixExists</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">suffix</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="nf">wordExists</span><span class="p">(</span><span class="n">TreeNodeChar</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>   
        <span class="c1">// the empty tree contains the empty string </span>
    <span class="p">}</span> 
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> 
    <span class="p">}</span>  
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">suffixExists</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">str</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> 
    <span class="p">}</span> 
    <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="n">wordExists</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">str</span><span class="p">)</span> <span class="o">||</span> 
        <span class="n">wordExists</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="äºŒå‰æœç´¢æ ‘è½¬åŒå‘é“¾è¡¨">äºŒå‰æœç´¢æ ‘è½¬åŒå‘é“¾è¡¨</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111022345242.png" alt="image-20211102234531161" style="zoom:50%;" /></p>

<p>è¿™æ˜¯ä¸€é“ååˆ†ç»å…¸çš„æ•°æ®ç»“æ„é¢˜ç›®ï¼Œã€Šå‰‘æŒ‡offerã€‹ä¸Šå¯¹æ­¤é¢˜æœ‰è¯¦ç»†æè¿°ï¼Œ<strong>åˆ©ç”¨äº†äºŒå‰æ ‘ä¸­åºéå†ä¸æ”¹å˜èŠ‚ç‚¹å¤§å°é¡ºåºçš„æ€§è´¨</strong>ã€‚è¿™é‡Œåªè´´ä»£ç ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">TreeNode</span><span class="o">*</span> <span class="nf">flattenTree</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">lastNodeInList</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="c1">// since we perform in-order traversal, so we will return the last node in the list</span>
    <span class="n">convertNode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">lastNodeInList</span><span class="p">);</span>
    <span class="c1">// we need to return the head</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">head</span> <span class="o">=</span> <span class="n">lastNodeInList</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">nullptr</span> <span class="o">&amp;&amp;</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">convertNode</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// left</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">convertNode</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">node</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// link the root into the current link list</span>
    <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// set the root as the current lastNode</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
    <span class="c1">// right</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">convertNode</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">node</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>åˆšå¼€å§‹æœ‰äº›ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œæœ‰æŠŠå·¦å­æ ‘è¿æ¥åˆ°æ ¹èŠ‚ç‚¹ä½†æ˜¯å´æ²¡æœ‰å°†å³å­æ ‘è¿æ¥åˆ°æ ¹èŠ‚ç‚¹çš„è¿‡ç¨‹ï¼Ÿè¿™ä¹Ÿæ˜¯ä½¿ç”¨ä¸­åºéå†çš„ä¾¿åˆ©ä¹‹å¤„ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œåœ¨ä¸¤æ¬¡éå†ä¹‹é—´å®Œæˆã€‚å…¶å®å¦‚æœè¦å»åˆ†æä¹Ÿå¾ˆå®¹æ˜“ï¼Œå› ä¸ºé“¾æ¥çš„ä¿¡æ¯æ˜¯è¢«æˆ‘ä»¬ä¿å­˜åœ¨äº†<code class="language-plaintext highlighter-rouge">node</code>æ•°æ®ä¸­ï¼Œåœ¨å³å­æ ‘çš„éå†è¿‡ç¨‹ä¸­ï¼Œä¼šåˆ©ç”¨è¯¥å‚æ•°çš„ä¿¡æ¯ï¼Œå°†å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹ä¸æ ¹èŠ‚ç‚¹ï¼ˆå³<code class="language-plaintext highlighter-rouge">node</code>ï¼‰é“¾æ¥èµ·æ¥ã€‚</p>
</blockquote>

<h2 id="section-7---graph">Section 7 - Graph</h2>

<h3 id="tournamentwinners">tournamentWinners</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110311615054.png" alt="image-20211031161551963" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜å¯¹<code class="language-plaintext highlighter-rouge">winner</code>çš„åˆ¤å®šæ–¹æ³•æ¯”è¾ƒå·§å¦™ï¼Œé€šè¿‡æ¯”è¾ƒ<code class="language-plaintext highlighter-rouge">size</code>å®ç°ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110311617586.png" alt="image-20211031161707516" style="zoom:50%;" /></p>

<h3 id="dfs--memorization-å²›å±¿é—®é¢˜">DFS + memorization (å²›å±¿é—®é¢˜ï¼Ÿ)</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111022338045.png" alt="image-20211102233827976" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜ç›®çš„å…³é”®åœ¨äºå•ç‹¬è®¾ç½®ä¸€ä¸ªäºŒç»´çš„<code class="language-plaintext highlighter-rouge">visited</code>æ•°ç»„ï¼Œç”¨äºè¡¨ç¤ºä¹‹å‰æ˜¯å¦åˆ°è¾¾è¿‡è¯¥ç‚¹ï¼Œå¦‚æœåˆ°è¾¾è¿‡ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›ï¼ˆå› ä¸ºä½¿ç”¨DFSï¼Œç›¸å½“äºæ‰€æœ‰ä»è¯¥ç‚¹ç»§ç»­å¾€åèµ°çš„æƒ…å†µéƒ½è¢«æ¢æŸ¥è¿‡äº†ï¼‰ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// use Stanford C++ library</span>
<span class="kt">bool</span> <span class="nf">canMoveToCornerHelper</span><span class="p">(</span><span class="k">const</span> <span class="n">Grid</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">grid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="n">Grid</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&amp;</span> <span class="n">visited</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">grid</span><span class="p">.</span><span class="n">inBounds</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">visited</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// if get to the place, return</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="n">grid</span><span class="p">.</span><span class="n">numRows</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
            <span class="n">j</span> <span class="o">==</span> <span class="p">(</span><span class="n">grid</span><span class="p">.</span><span class="n">numCols</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// recursion</span>
    <span class="c1">// get the number:</span>
    <span class="kt">int</span> <span class="n">step</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
    <span class="n">visited</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="c1">// four choices, perform backtracking</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">canMoveToCornerHelper</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">step</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
            <span class="o">||</span> <span class="n">canMoveToCornerHelper</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">step</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
            <span class="o">||</span>  <span class="n">canMoveToCornerHelper</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="n">step</span><span class="p">,</span> <span class="n">visited</span><span class="p">)</span>
            <span class="o">||</span> <span class="n">canMoveToCornerHelper</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="n">step</span><span class="p">,</span> <span class="n">visited</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">canMoveToCorner</span><span class="p">(</span><span class="k">const</span> <span class="n">Grid</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">grid</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// keep track of the path</span>
    <span class="n">Grid</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">visited</span><span class="p">(</span><span class="n">grid</span><span class="p">.</span><span class="n">numRows</span><span class="p">(),</span> <span class="n">grid</span><span class="p">.</span><span class="n">numCols</span><span class="p">());</span>
    <span class="n">visited</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">canMoveToCornerHelper</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">visited</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="bfsçš„çµæ´»è¿ç”¨">BFSçš„çµæ´»è¿ç”¨</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111030013179.png" alt="image-20211103001343072" style="zoom:50%;" /></p>

<p>è¿™é“é¢˜æ€è·¯å‘BFSé æ‹¢ï¼Œä½†æ˜¯è¦å¯¹BFSåšä¸€ç‚¹æ”¹å˜ï¼ŒåŒæ—¶æ³¨æ„è¿™é‡Œæˆ‘ä»¬éœ€è¦çš„æ˜¯<strong>éå†</strong>ï¼Œè€Œä¸æ˜¯å»æ±‚æœ€çŸ­è·¯å¾„ï¼Œæ‰€ä»¥ä¸éœ€è¦è®¾ç½®ç»ˆæ­¢æ¡ä»¶ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">isBipartite</span><span class="p">(</span><span class="k">const</span> <span class="n">BasicGraph</span><span class="o">&amp;</span> <span class="n">graph</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">*&gt;</span> <span class="n">vertexSet</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">getVertexSet</span><span class="p">();</span>
    <span class="c1">// store two bipartite sets</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">red</span><span class="p">,</span> <span class="n">blue</span><span class="p">;</span>
    <span class="c1">// track which set vertices are in, if any</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">*</span><span class="p">,</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">colorMap</span><span class="p">;</span>
    <span class="c1">// queue in BFS</span>
    <span class="n">Queue</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">*&gt;</span> <span class="n">queue</span><span class="p">;</span>
    <span class="c1">// perform BFS</span>
    <span class="n">Vertex</span><span class="o">*</span> <span class="n">first</span> <span class="o">=</span> <span class="n">vertexSet</span><span class="p">.</span><span class="n">first</span><span class="p">();</span>
    <span class="n">colorMap</span><span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">=</span> <span class="s">"r"</span><span class="p">;</span>
    <span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">first</span><span class="p">);</span>
    <span class="n">red</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">first</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">queue</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">Vertex</span><span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">dequeue</span><span class="p">();</span>
        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Vertex</span><span class="o">*&gt;</span> <span class="n">neighbors</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">getNeighbors</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">neighbor</span> <span class="o">:</span> <span class="n">neighbors</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// if un-visited</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">colorMap</span><span class="p">.</span><span class="n">containsKey</span><span class="p">(</span><span class="n">neighbor</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">// set the opposite color to the node's</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">colorMap</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">==</span> <span class="s">"r"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">colorMap</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span> <span class="o">=</span> <span class="s">"b"</span><span class="p">;</span>
                    <span class="n">blue</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">neighbor</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="n">colorMap</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span> <span class="o">=</span> <span class="s">"r"</span><span class="p">;</span>
                    <span class="n">red</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">neighbor</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="n">queue</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">neighbor</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="c1">// if visited, check its color </span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">colorMap</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">==</span> <span class="n">colorMap</span><span class="p">[</span><span class="n">neighbor</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// cout sth.</span>
    
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="cs-106x-lecture-16-18--uiuc-cs-225--trees">CS 106X Lecture 16-18 &amp; UIUC CS 225 â€“ Trees</h2>

<p>åœ¨è¿™é‡Œå¯¹ä¸€äº›å¯èƒ½é¢è¯•ä¼šç”¨åˆ°çš„æ ‘çš„ç±»å‹åšä¸€ä¸ªæ€»ç»“ï¼š</p>

<p>å¯¹äºä¸€æ£µäºŒå‰æ ‘æ¥è®²ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>DFS</strong>å’Œ<strong>BFS</strong>ä¸¤ç§æ–¹æ³•å¯¹æ ‘è¿›è¡Œæœç´¢ï¼ˆæˆ–è€…è¿›è¡Œéå†ï¼‰ã€‚è€ƒè™‘<em>search</em>è¿™ä¸€æ“ä½œï¼šæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦ï¼ˆå‡æŒ‡æœ€åæƒ…å†µï¼‰ï¼š</p>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th>æ—¶é—´å¤æ‚åº¦</th>
      <th>ç©ºé—´å¤æ‚åº¦</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>DFS</td>
      <td>O(n)</td>
      <td>O(h)</td>
    </tr>
    <tr>
      <td>BFS</td>
      <td>O(n)</td>
      <td>O(n)</td>
    </tr>
  </tbody>
</table>

<p>åœ¨è®¨è®ºæ—¶ï¼Œä¸»è¦è€ƒæŸ¥å®Œç¾äºŒå‰æ ‘ä»¥åŠ<code class="language-plaintext highlighter-rouge">h=n</code>çš„ç‰¹æ®Šæƒ…å†µï¼Œå¯¹äºç©ºé—´å¤æ‚åº¦çš„åˆ†æé€šè¿‡è®¡ç®—å®ç°<em>DFS</em>ä¸<em>BFS</em>æ“ä½œçš„æ ˆå†…èŠ‚ç‚¹æ•°é‡å¾—åˆ°ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨é€’å½’å®ç°ï¼Œé‚£ä¹ˆ<strong>æ±‚çš„æ˜¯é€’å½’æœ€æ·±çš„é‚£ä¸€æ¬¡å‹æ ˆæ‰€è€—è´¹çš„ç©ºé—´çš„ä¸ªæ•°ï¼›é€’å½’æœ€æ·±çš„é‚£ä¸€æ¬¡æ‰€è€—è´¹çš„ç©ºé—´è¶³ä»¥å®¹çº³å®ƒæ‰€æœ‰é€’å½’è¿‡ç¨‹ã€‚</strong></p>

<h3 id="binary-search-tree-bst">Binary Search Tree (BST)</h3>

<h4 id="åŸºæœ¬æ•°æ®ç»“æ„">åŸºæœ¬æ•°æ®ç»“æ„</h4>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BST</span> <span class="p">{</span>
    <span class="nl">public:</span>
    <span class="c1">// remove</span>
    <span class="c1">// insert</span>
    <span class="c1">// getMin</span>
    <span class="c1">//...</span>
    
    <span class="nl">private:</span>
    <span class="c1">// a node data structure</span>
        <span class="k">struct</span> <span class="nc">TreeNode</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
            <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">;</span>
            <span class="c1">// a constructor</span>
            <span class="n">TreeNode</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">right</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span>
            <span class="p">{};</span>
        <span class="p">};</span>
        <span class="c1">// head pointer</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">head</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>äºŒå‰æœç´¢æ ‘å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š</p>

<ol>
  <li><em>left.v &lt; p.v &lt; right.v</em></li>
  <li>O(lgn) &lt; O(V) &lt; O(h)</li>
</ol>

<h4 id="æ–¹æ³•å®ç°">æ–¹æ³•å®ç°</h4>

<h5 id="contains-oh">contains-O(h)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">contains</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">==</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="n">contains</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">||</span>
            <span class="n">contains</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="search-oh">search-O(h)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">TreeNode</span><span class="o">*</span> <span class="nf">find</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">find</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">find</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">node</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<h5 id="getmin-oh">getMin-O(h)</h5>

<blockquote>
  <p>æœ€å°å€¼å­˜åœ¨äºæ ‘çš„æœ€å·¦ä¾§èŠ‚ç‚¹ï¼ŒåŒç†ï¼Œæœ€å¤§å€¼ä¸ºæ ‘çš„æœ€å³ä¾§èŠ‚ç‚¹</p>
</blockquote>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// pass by pointer(value)</span>
<span class="kt">int</span> <span class="nf">getMin</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">getMin</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> 
        <span class="k">return</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="insert-oh">insert-O(h)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">insert</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">insert</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// do nothing, don't need to insert</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="remove-oh">remove-O(h)</h5>

<blockquote>
  <p>å½“æ‰€åˆ é™¤èŠ‚ç‚¹æœ‰<strong>ä¸¤ä¸ªå­©å­</strong>æ—¶ï¼Œä¸»è¦æµç¨‹åŒ…æ‹¬:</p>

  <ol>
    <li>å…ˆæ‰¾åˆ°åˆ é™¤èŠ‚ç‚¹</li>
    <li>æ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„<strong>å‰é©±</strong>æˆ–è€…<strong>åç»§</strong></li>
    <li>swap</li>
    <li>åˆ é™¤äº¤æ¢åçš„åŸèŠ‚ç‚¹</li>
  </ol>
</blockquote>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">remove</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">remove</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">remove</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span> 
    <span class="c1">// different removing cases</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// case 1: leaf</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">isLeaf</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// free the memory that the current node pointing at</span>
            <span class="k">delete</span> <span class="n">node</span><span class="p">;</span>
            <span class="c1">// set the node pointing to null, indicating node's parent</span>
            <span class="c1">// that there is no child</span>
            <span class="n">node</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// case 2: only left subtree</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">TreeNode</span><span class="o">*</span> <span class="n">trash</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="k">delete</span> <span class="n">trash</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// case 3 : only right subtree</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">TreeNode</span><span class="o">*</span> <span class="n">trash</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="k">delete</span> <span class="n">trash</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// case 4: have two children</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// find IOS</span>
            <span class="kt">int</span> <span class="n">minValue</span> <span class="o">=</span> <span class="n">getMin</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">minValue</span><span class="p">;</span>
            <span class="n">remove</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">minValue</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="avl-tree-balanced--tree">AVL Tree (Balanced  Tree)</h3>

<h4 id="åŸºæœ¬ç‰¹å¾">åŸºæœ¬ç‰¹å¾</h4>

<p>Height balance:</p>

<p><code class="language-plaintext highlighter-rouge">b = height(Tr) - height(Tl)</code></p>

<p>A tree is balanced if: The tree itself and all its subtrees meets: \(\lvert b \rvert \le 1\).</p>

<ul>
  <li>Four kinds of rotations (<strong>L, R, LR, RL</strong>)</li>
  <li>All rotations are local (subtrees are not impacted)</li>
  <li>All rotations are constant time: <strong>O(1)</strong></li>
  <li>BST property maintained</li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110161852300.png" alt="image-20211016185257206" style="zoom:50%;" /></p>

<h5 id="rotation-example">rotation example</h5>

<ul>
  <li><strong>L</strong></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110161451602.png" alt="image-20211016145105424" style="zoom:50%;" /></p>

<blockquote>
  <p>åªéœ€è¦æ›´æ”¹<strong>3</strong>å¤„æŒ‡é’ˆï¼Œæ‰€ä»¥æ—‹è½¬çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•°çº§</p>
</blockquote>

<ul>
  <li><strong>LR</strong></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110161839255.png" alt="image-20211016183902941" style="zoom:50%;" /></p>

<p>éœ€è¦æ³¨æ„çš„å‡ ä¸ªå˜æ¢ç‰¹å¾ï¼š</p>

<ol>
  <li>å¯¹äºå•ç‹¬çš„å·¦æ—‹è½¬ä¸å³æ—‹è½¬ï¼Œæˆ‘ä»¬æ‰€å¤„ç†çš„å¯¹è±¡æ˜¯ä¸€ä¸ª<em>stick</em>ï¼›è€Œå¯¹äºä¸¤ç§å¤åˆæ“ä½œæ¥è¯´ï¼Œæˆ‘ä»¬æ‰€å¤„ç†çš„å¯¹è±¡å½¢çŠ¶è¢«å®šä¹‰ä¸ºä¸€ä¸ª<em>elbow</em>ã€‚</li>
  <li>åˆ†åˆ«è§‚å¯Ÿå·¦æ—‹è½¬ä¸å³æ—‹è½¬ï¼Œæˆ‘ä»¬å®¹æ˜“å‘ç°ï¼Œå®ƒä»¬éƒ½æ˜¯ä»¥<em>stick</em>çš„ä¸­å¿ƒèŠ‚ç‚¹ä¸ºè½´ï¼Œå·¦æ—‹è½¬å°†<em>stick</em>ä¸­çš„é¡¶ç«¯èŠ‚ç‚¹è½¬åˆ°å·¦ä¸‹ç«¯ï¼Œè€Œå³æ—‹è½¬åˆ™æˆå¯¹ç§°å¼åœ°å°†ä½äºå³ä¸Šçš„é¡¶ç«¯èŠ‚ç‚¹æ—‹è½¬åˆ°å³ä¸‹æ–¹ã€‚ä»–ä»¬æœ€åéƒ½å½¢æˆä¸€ä¸ª<em>å±±å³°</em>çŠ¶ã€‚</li>
  <li>å¯¹äºæ­¤ç±»å¤åˆå‹æ“ä½œï¼Œåœ¨å›¾åƒä¸Šçš„æ•ˆæœä¹Ÿæ˜¯<strong>å…ˆå±•å¼€å†å¼¯æ›²</strong>.ä»æ“ä½œä¸Šæ¥è®²ï¼Œæ˜¯å…ˆå¯¹ä¸­é—´èŠ‚ç‚¹è¿›è¡Œå·¦æ—‹ï¼ˆå³æ—‹ï¼‰ï¼Œä¹‹åå†å¯¹æ•´ä½“ï¼ˆå­æ ‘æ ¹èŠ‚ç‚¹ï¼‰è¿›è¡Œå³æ—‹ï¼ˆå·¦æ—‹ï¼‰ã€‚</li>
</ol>

<h5 id="finding-rotations-on-insert">finding rotations on Insert</h5>

<ul>
  <li>L</li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110161903267.png" alt="image-20211016190321171" style="zoom:50%;" /></p>

<p>å› ä¸ºåœ¨æ’å…¥èŠ‚ç‚¹åï¼Œå¹³è¡¡æ ‡å¿—çš„è®¡ç®—æ˜¯è‡ªé¡¶è€Œä¸Šçš„ï¼Œåœ¨<strong>ç¬¬ä¸€æ¬¡æ£€æµ‹åˆ°</strong>ä¸æ»¡è¶³AVLæ¡ä»¶çš„ä½ç½®<em>t</em>ï¼Œå¹³è¡¡ç³»æ•°<em>b</em>ä¸€å®šä¸º<strong>2</strong>.</p>

<p>ç»§ç»­æ¨æ–­å¾—åˆ°ï¼š<em>t-&gt;right</em>çš„<em>b</em>å€¼ä¸º<strong>1</strong>.</p>

<ul>
  <li>RL</li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110161944872.png" alt="image-20211016194415770" style="zoom:50%;" /></p>

<p>åŒç†ï¼Œå¯¹äºè¿™ä¸€ç±»æ—‹è½¬ï¼Œ<em>t</em>ä½ç½®<em>b</em>ä¸º<strong>2</strong>ï¼Œä½†æ˜¯<em>t-&gt;right</em>çš„<em>b</em>ä¸º<strong>-1</strong>.</p>

<h4 id="åŸºæœ¬æ•°æ®ç»“æ„-1">åŸºæœ¬æ•°æ®ç»“æ„</h4>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="nc">TreeNode</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
    <span class="c1">// need to keep track of the node's height</span>
    <span class="kt">unsigned</span> <span class="n">height</span><span class="p">;</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span><span class="p">;</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">right</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="æ–¹æ³•å®ç°-1">æ–¹æ³•å®ç°</h4>

<h5 id="height-o1">height-O(1)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">height</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="rightrotate-o1">rightRotate-O(1)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">rightRotate</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    
    <span class="c1">// perform rotation</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
    <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">t2</span><span class="p">;</span>
    
    <span class="c1">// update the heights</span>
    <span class="n">node</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">height</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="leftrotate-o1">leftRotate-O(1)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">leftRotate</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
    
    <span class="c1">// preform rotation</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
    <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">t2</span><span class="p">;</span>
    
    <span class="c1">// update the height</span>
    <span class="n">node</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">x</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">height</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="rebalance-olgn">reBalance-O(lgn)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">rebalance</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// calculate two balances</span>
    <span class="kt">int</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">height</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="o">-</span> <span class="n">height</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">rightBalance</span> <span class="o">=</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="o">-</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rightBalance</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// R</span>
            <span class="n">leftRotate</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rightBalance</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// RL</span>
            <span class="n">rightRotate</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="n">leftRotate</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">balance</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">leftBalance</span> <span class="o">=</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="o">-</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">leftBalance</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// R</span>
            <span class="n">rightRotate</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">leftBalance</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// LR</span>
            <span class="n">leftRotate</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="n">rightRotate</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// update the t's height</span>
    <span class="n">node</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span> <span class="n">height</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>   

</code></pre></div></div>

<h5 id="insert-olgn">insert-O(lgn)</h5>

<p>AVLæ ‘çš„æ’å…¥æ“ä½œå¯ä»¥è¢«åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š</p>

<ol>
  <li>Insert at proper place</li>
  <li>Check for imbalance</li>
  <li>Rotate, if necessary</li>
  <li>Update height</li>
  <li>Recursive up</li>
</ol>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insert</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// will insert and adjust the right tree</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">insert</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// will insert and adjust the left tree</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">insert</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// rebalance the tree</span>
    <span class="n">reBalance</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>ä¸ºä»€ä¹ˆæ’å…¥æ“ä½œåªéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€æ¬¡<em>reBalance</em>ï¼Œå› ä¸ºæ’å…¥ä¼šå°†æ ‘çš„é«˜åº¦å¢åŠ 1ï¼Œè€Œé‡å¹³è¡¡ä¼šå°†æ ‘çš„é«˜åº¦å‡çŸ­1ï¼Œæ•…ä¸ä¼šå¯¹å…¶ä½™éƒ¨åˆ†é€ æˆå½±å“ã€‚</p>
</blockquote>

<h5 id="remove-olgn">remove-O(lgn)</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">remove</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use the BST remove function</span>
    <span class="n">remove</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="c1">// reBalance the tree (each subtree)</span>
    <span class="n">reBalance</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h4>

<p>è¿™ä¸€éƒ¨åˆ†å¯ä»¥å‚è§UIUC CS 225å…³äºAVLæ ‘çš„æ€§èƒ½åˆ†æï¼Œé€šè¿‡èŠ‚ç‚¹æ•°ç›®ä¸æ ‘çš„é«˜åº¦çš„å…³ç³»å¾—åˆ°äº†ä¸€ä¸ªç²—ç•¥çš„ä¸‹ç•Œï¼Œåè¿‡æ¥ç¡®å®šäº†æ ‘é«˜åº¦çš„ä¸Šç•Œï¼ˆä¸€ä¸ªä¼°è®¡å€¼ï¼‰ã€‚è¿™é‡Œä¸ä½œè¯¦ç»†è®¨è®ºã€‚</p>

<h3 id="tries-dictionary--search--tree">Tries (Dictionary  Search  Tree)</h3>

<h4 id="åŸºæœ¬æ•°æ®ç»“æ„-2">åŸºæœ¬æ•°æ®ç»“æ„</h4>

<pre><code class="language-C++">struct TireNode {
    TrieNode* chilren[26];
    bool isWord;
}
</code></pre>

<p>å•è¯æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹åœ¨äºï¼š<strong>æŸ¥æ‰¾å‘½ä¸­æ‰€éœ€çš„æ—¶é—´ä¸è¢«æŸ¥æ‰¾çš„é”®çš„é•¿åº¦æˆæ­£æ¯”</strong>ã€‚ï¼ˆå¦‚æœæˆ‘ä»¬å°†å­—æ¯å­˜å‚¨äºä¸€ä¸ªäºŒå‰å¹³è¡¡æœç´¢æ ‘ä¸­ï¼Œåˆ™æŸ¥æ‰¾éœ€è¦çš„æ—¶é—´ä¸º<strong>é”®çš„é•¿åº¦*O(lgn)</strong>ï¼‰</p>

<h4 id="æ–¹æ³•å®ç°my-github">æ–¹æ³•å®ç°ï¼ˆMy Githubï¼‰</h4>

<p>ç”±äºå­—å…¸æŸ¥æ‰¾æ ‘çš„å®ç°è¾ƒä¸ºå¤æ‚ï¼Œæˆ‘å°†å®ç°æ–¹æ³•æ”¾åˆ°äº†æˆ‘çš„<a href="https://github.com/SongShaopu1998/Tries">GitHubä»“åº“</a>ä¸­ï¼Œè¯¥ä»“åº“å†…åŒæ—¶åŒ…å«äº†å‹ç¼©å­—å…¸æŸ¥æ‰¾æ ‘ï¼Œå³<em>compressed trie</em>çš„å®ç°ã€‚</p>

<blockquote>
  <p>å…³äº<em>compressed trie</em>ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡åšå®¢è®²å¾—æ¯”è¾ƒæ¸…æ¥šï¼Œæˆ‘çš„ä»£ç ä¹Ÿæ˜¯æ ¹æ®æ­¤åŸç†å®ç°ï¼š</p>

  <p>http://theoryofprogramming.com/2016/11/15/compressed-trie-tree/</p>
</blockquote>

<h3 id="kd-tree--btree">KD-Tree &amp; BTree</h3>

<p>è¿™éƒ¨åˆ†å†…å®¹ä¸ä½œè¯¦ç»†å®ç°äº†ï¼ŒKD-Treeå‡†å¤‡åœ¨CS 106Lè¯¾ç¨‹ä¸­å®ç°ï¼ŒBæ ‘çš„æ€§è´¨è®²è§£å¯ä»¥å‚è§UIUC CS 225çš„è¯¾ç¨‹è§†é¢‘ã€‚è¿™é‡Œä»…ä»…åˆ—å‡ºå…³äºBæ ‘çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼š</p>

<h4 id="bæ ‘æ€§è´¨">Bæ ‘æ€§è´¨</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110191803091.png" alt="image-20211019180300906" style="zoom:50%;" /></p>

<h4 id="insert--search">insert &amp; search</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110191807439.png" alt="image-20211019180741294" style="zoom:50%;" /></p>

<p>è¿™æ®µä»£ç çš„æ€è·¯å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå…ˆæ‰¾åˆ°æ‰€æŸ¥çœ‹èŠ‚ç‚¹ä¸­çš„åˆç†ä½ç½®ï¼Œä¹‹åå†æ ¹æ®æƒ…å†µè¿›è¡Œé€’å½’å³å¯ï¼Œæˆ–è€…ç›´æ¥è¿”å›ç»“æœã€‚</p>

<p>è€ŒBæ ‘çš„æ’å…¥æ˜¯ä¸€ä¸ªè‡ªåº•å‘ä¸Šçš„è¿‡ç¨‹ï¼Œé¦–å…ˆæ‰¾åˆ°è¯¥å±‚èŠ‚ç‚¹ä¸­åˆé€‚çš„ä½ç½®ï¼Œä¹‹åæˆ‘ä»¬é€šè¿‡é€’å½’ä¸æ–­å˜æ›´èŠ‚ç‚¹çš„ç¥–å…ˆï¼ˆå¦‚æœæœ‰å¿…è¦ï¼‰ã€‚</p>

<h3 id="segment-tree">Segment Tree</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110201816908.png" alt="img" style="zoom:50%;" /></p>

<p>çº¿æ®µæ ‘å¸¸è¢«ç”¨äºå­˜å‚¨åŒºé—´ï¼Œä½¿ç”¨è¯¥ç»“æ„æ¥å¯¹<strong>åŒºé—´</strong>è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚æŸ¥è¯¢æˆ–è€…æ›´æ–°ã€‚çº¿æ®µæ ‘çš„å¸¸è§æ„é€ æœ‰ï¼šçˆ¶èŠ‚ç‚¹ä¸ºä¸¤å­èŠ‚ç‚¹çš„æœ€å°å€¼ã€æœ€å¤§å€¼æˆ–è€…ä»–ä»¬çš„å’Œã€‚è¿™é‡Œä»¥<em>min query</em>ä¸ºä¾‹ï¼Œè¿›è¡Œæ¢è®¨ã€‚</p>

<h4 id="construct-on">construct-O(n)</h4>

<p>å…³äºçº¿æ®µæ ‘çš„æ„é€ ï¼Œç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œè¿™é‡Œä»…åˆ—å‡ºå‡ ç‚¹ï¼Œä¸ºäº†é¿å…æ—¥åè‡ªå·±å¿˜è®°ï¼š</p>

<ol>
  <li>çº¿æ®µæ ‘çš„æ„é€ ä¸å †ç±»ä¼¼ï¼Œå¹¶ä¸æ˜¯ç”¨çœŸæ­£çš„<strong>æ ‘</strong>ç»“æ„å­˜å‚¨ï¼Œè€Œæ˜¯æ˜¯ç”¨äº†æ•°ç»„çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡ä¸‹æ ‡çš„æ¢ç®—æ¥å†³å®šçˆ¶èŠ‚ç‚¹å’Œå­ä»£èŠ‚ç‚¹çš„ä½ç½®ã€‚ä¸¤ä¸ªå­èŠ‚ç‚¹çš„åæ ‡åˆ†åˆ«ä¸ºï¼š\(2i+1\)å’Œ\(2i+2\).</li>
  <li>å¦‚æœç»™å®šç›®æ ‡æ•°ç»„çš„ç»´åº¦ä¸º\(n\)ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°çº¿æ®µæ ‘çš„ç»´åº¦\(N\)ï¼Œæ»¡è¶³\(N=2*k-1\)ï¼Œå…¶ä¸­\(k\)æ»¡è¶³\(min(k-n)\)ï¼Œä¸”\(k=2^q\)ã€‚</li>
  <li>ç”±äºæˆ‘ä»¬å¤„ç†çš„èŠ‚ç‚¹æ•°ï¼ˆæ ¹æ®å‰è¾¹çš„å…¬å¼ï¼‰å¤§è‡´ä¸º\(2n\)ä¸ªï¼Œæ‰€ä»¥æ„é€ è¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦ä¸º<strong>O(n)</strong>ã€‚</li>
  <li>ä»ç„¶æ˜¯é€šè¿‡é€’å½’çš„æ–¹æ³•æ„é€ ï¼Œè¿™ä¹Ÿå¾—ç›Šäºçº¿æ®µæ ‘çš„çˆ¶èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹çš„å…³ç³»ç‰¹æ€§ã€‚</li>
  <li>æ„é€ è¿‡ç¨‹ä¹Ÿæ˜¯è‡ªåº•å‘ä¸Šçš„ã€‚</li>
</ol>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SegmentTree</span><span class="o">::</span><span class="n">SegmentTree</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// get the next power of 2</span>
    <span class="kt">int</span> <span class="n">powerSize</span> <span class="o">=</span> <span class="n">nextPowerOf2</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="c1">// allocate the memory to the private member array</span>
    <span class="c1">// based on the attribute of segmentTree</span>
    <span class="n">segmentTree</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">powerSize</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="c1">// store the INT_MAX</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">powerSize</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">segmentTree</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
        <span class="c1">// also initialize the lazy array</span>
        <span class="n">lazy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">constructHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">SegmentTree</span><span class="o">::</span><span class="n">constructHelper</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="n">high</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// we reach the end of the segmentTree</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">==</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">low</span><span class="p">];</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">leftChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rightChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">constructHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">leftChildPos</span><span class="p">);</span>
    <span class="n">constructHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">rightChildPos</span><span class="p">);</span>
    <span class="c1">// after the left &amp; right children are all being processed, set the parent</span>
    <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">segmentTree</span><span class="p">[</span><span class="n">leftChildPos</span><span class="p">],</span> <span class="n">segmentTree</span><span class="p">[</span><span class="n">rightChildPos</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="nextpowerof2">nextPowerOf2</h5>

<p>è¯¥è¾…åŠ©å‡½æ•°ä½¿ç”¨ä½æ“ä½œå¸®åŠ©æ‰¾åˆ°è·ç¦»\(n\)æœ€è¿‘çš„2çš„æ¬¡å¹‚ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">nextPowerOf2</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="c1">// n is a power of 2</span>
    <span class="c1">// using bits operation</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// else</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">result</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">result</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="rangeminquery-olgn">rangeMinQuery-O(lgn)</h4>

<p>è¯¥å‡½æ•°çš„åŠŸèƒ½æ˜¯è¿›è¡ŒåŒºé—´æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åŒºé—´çš„æœ€å°å€¼ã€‚å¯¹äºæ­¤ç±»é—®é¢˜ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p>

<ol>
  <li>æ­¤ç±»é—®é¢˜ä»¥åŠåè¾¹å³å°†å‡ºç°çš„åŒºé—´æ›´æ–°ï¼Œå…¶æ—¶é—´å¤æ‚åº¦å‡ä¸ºå¯¹æ•°çº§åˆ«</li>
  <li>æ­¤ç±»é—®é¢˜ä»¥åŠåè¾¹å³å°†å‡ºç°çš„åŒºé—´æ›´æ–°ï¼Œå‡è¢«åˆ†ä¸ºä¸‰ç§æƒ…å†µäºˆä»¥è®¨è®ºï¼šno overlap, total overlap, partial overlapï¼Œåˆ†åˆ«å¯¹åº”äº†ä»£ç ä¸­çš„base caseä»¥åŠrecursive caseã€‚<strong>ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„é‡åˆæƒ…å†µçš„å¯¹è±¡æ˜¯ç”±ç»™å®šåŒºé—´æŒ‡å‘æ€»é•¿åº¦çš„ï¼Œè€ŒéæŸ¥çœ‹æ€»é•¿åº¦ç›¸å¯¹äºç»™å®šåŒºé—´çš„é‡åˆæƒ…å†µã€‚</strong>åœ¨éƒ¨åˆ†é‡åˆæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­é€’å½’ï¼Œå…¶ç›®çš„ä¹Ÿå°±æ˜¯ä¸ºäº†æ‰¾åˆ°<em>total overlap</em>çš„ä½ç½®ã€‚</li>
</ol>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">SegmentTree</span><span class="o">::</span><span class="n">rangeMinimumQueryHelper</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="o">*</span><span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="n">high</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qlow</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qhigh</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// no overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qlow</span> <span class="o">&gt;</span> <span class="n">high</span> <span class="o">||</span> <span class="n">qhigh</span> <span class="o">&lt;</span> <span class="n">low</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">INT_MAX</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// total overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qlow</span> <span class="o">&gt;=</span> <span class="n">low</span> <span class="o">&amp;&amp;</span> <span class="n">qhigh</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// partial overlap</span>
    <span class="c1">// continue to search</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">leftChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rightChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="c1">// since it is min query</span>
    <span class="k">return</span> <span class="n">min</span><span class="p">(</span><span class="n">rangeMinimumQueryHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">leftChildPos</span><span class="p">),</span>
               <span class="n">rangeMinimumQueryHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">rightChildPos</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="updatetreerange-olgn">updateTreeRange-O(lgn)</h4>

<p>æ•ˆä»¿ä¸Šè¾¹çš„æ–¹æ³•ï¼Œæœ‰æ‰€ä¸åŒçš„æ˜¯ï¼Œå½“é‡åˆ°<em>no overlap</em>çš„æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬åº”å½“ç›´æ¥è¿”å›ï¼Œè€Œä¸æ˜¯æä¾›ä¸€ä¸ª<strong>MAX</strong>æ ‡è®°ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">SegmentTree</span><span class="o">::</span><span class="n">updateSegmentTreeRangeHelper</span><span class="p">(</span><span class="kt">int</span> <span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="n">high</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qlow</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qhigh</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delta</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// put the low&gt;highï¼ˆan error case in finalï¼‰ case and the "no overlap" case together</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">&gt;</span> <span class="n">high</span> <span class="o">||</span> <span class="n">qlow</span> <span class="o">&gt;</span> <span class="n">high</span> <span class="o">||</span> <span class="n">qhigh</span> <span class="o">&lt;</span> <span class="n">low</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// reach the end</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">==</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+=</span> <span class="n">delta</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">leftChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rightChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">updateSegmentTreeRangeHelper</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">leftChildPos</span><span class="p">,</span> <span class="n">delta</span><span class="p">);</span>
    <span class="n">updateSegmentTreeRangeHelper</span><span class="p">(</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">rightChildPos</span><span class="p">,</span> <span class="n">delta</span><span class="p">);</span>
    <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">segmentTree</span><span class="p">[</span><span class="n">leftChildPos</span><span class="p">],</span> <span class="n">segmentTree</span><span class="p">[</span><span class="n">rightChildPos</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="lazy-propagation">lazy propagation</h4>

<p><em>lazy propagation</em>æ˜¯çº¿æ®µæ ‘ä¸­çš„ä¸€ç§é‡è¦çš„ä¼˜åŒ–æ“ä½œï¼Œé€šä¿—ä¸€ç‚¹è¯´ï¼Œ<em>lazy propagation</em>å¯ä»¥è®©æˆ‘ä»¬å†åŒºé—´æ›´æ–°æ—¶ï¼Œä¸éœ€è¦åœ¨æ ‘çš„æŸä¸€åˆ†æ”¯ä¸­ä»é¡¶åˆ°ä¸‹çš„æ›´æ–°æ‰€æœ‰åŒºå†…èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥<strong>åªæ›´æ–°åˆ°<em>total overlap</em>çš„ä½ç½®</strong>ï¼ˆä¹‹åä¾¿å¯ä»¥è¿”å›äº†ï¼Œè¿™ä¹Ÿæ˜¯ç¬¦åˆç›´è§‚æ„Ÿå—å’Œçº¿æ®µæ ‘çš„èŠ‚ç‚¹æ„ä¹‰çš„ï¼‰ï¼Œå¹¶åœ¨<em>lazy tree</em>ä¸­çš„å­ä»£èŠ‚ç‚¹å¤„è®¾ç½®ä¸€ä¸ªå¯¹åº”çš„æœ¬æ¬¡æ›´æ–°å€¼ï¼Œ æ„å‘³ç€ä»¥ä¸‹çš„æ•°æ®ä¸æ˜¯æœ€æ–°çš„ã€‚å½“ä»¥åæœ‰å¿…è¦<strong>æŸ¥è¯¢å’Œæ›´æ–°</strong>æ—¶ï¼Œ<strong>å†é€æ­¥å°†å…ˆå‰çš„æ›´æ–°å€¼ä¼ é€’åˆ°ä¸‹å±‚çš„èŠ‚ç‚¹</strong>å½“ä¸­ã€‚</p>

<h5 id="updatetreerangelazy">updateTreeRangeLazy</h5>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">SegmentTree</span><span class="o">::</span><span class="n">updateSegmentTreeRangeLazyHelper</span><span class="p">(</span><span class="kt">int</span> <span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="n">high</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qlow</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qhigh</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delta</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// an error case, we cannot combine this case with the no overlap case</span>
    <span class="c1">// when doing lazy propagation, since we need to check the lazy tree first</span>
    <span class="c1">// even when no overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">&gt;</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// send the past operation's result back to the segmentTree node</span>
        <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
        <span class="c1">// we are not at the position of leaf node</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">!=</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">lazy</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
            <span class="n">lazy</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="c1">// eliminate the past flag at pos</span>
        <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// no overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qlow</span> <span class="o">&gt;</span> <span class="n">high</span> <span class="o">||</span> <span class="n">qhigh</span> <span class="o">&lt;</span> <span class="n">low</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// total overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qlow</span> <span class="o">&gt;=</span> <span class="n">low</span> <span class="o">&amp;&amp;</span> <span class="n">qhigh</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+=</span> <span class="n">delta</span><span class="p">;</span>
        <span class="c1">// doing lazy propagation</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">!=</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">lazy</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">delta</span><span class="p">;</span>
            <span class="n">lazy</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">delta</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// immediately return</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// partial overlap</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">leftChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rightChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">updateSegmentTreeRangeLazyHelper</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">leftChildPos</span><span class="p">,</span> <span class="n">delta</span><span class="p">);</span>
    <span class="n">updateSegmentTreeRangeLazyHelper</span><span class="p">(</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">rightChildPos</span><span class="p">,</span> <span class="n">delta</span><span class="p">);</span>
    <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">segmentTree</span><span class="p">[</span><span class="n">leftChildPos</span><span class="p">],</span> <span class="n">segmentTree</span><span class="p">[</span><span class="n">rightChildPos</span><span class="p">]);</span>
    
<span class="p">}</span>
</code></pre></div></div>

<p>è€Œå½“æˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå°±ä¹Ÿéœ€è¦å¯¹åº”çš„æ“ä½œäº†ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">SegmentTree</span><span class="o">::</span><span class="n">rangeMinimumQueryLazyHelper</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="o">*</span><span class="n">array</span><span class="p">,</span> <span class="kt">int</span> <span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="n">high</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qlow</span><span class="p">,</span> <span class="kt">int</span> <span class="n">qhigh</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// an error case might encounter at leaf node</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">&gt;</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">INT_MAX</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// see the lazy tree, if there is some states we have not performed in our</span>
    <span class="c1">// segment tree ever?</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// need to pass back the update result from the lazy tree to the segment tree</span>
        <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">low</span> <span class="o">!=</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// update the lazy tree state to the next level</span>
            <span class="n">lazy</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
            <span class="n">lazy</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>    
        <span class="p">}</span>
        <span class="n">lazy</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// no overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qlow</span> <span class="o">&gt;</span> <span class="n">high</span> <span class="o">||</span> <span class="n">qhigh</span> <span class="o">&lt;</span> <span class="n">low</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">INT_MAX</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// total overlap</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qlow</span> <span class="o">&gt;=</span> <span class="n">low</span> <span class="o">&amp;&amp;</span> <span class="n">qhigh</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">segmentTree</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// partial overlap</span>
    <span class="c1">// continue to search</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">leftChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rightChildPos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="c1">// since it is min query</span>
    <span class="k">return</span> <span class="n">min</span><span class="p">(</span><span class="n">rangeMinimumQueryLazyHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">leftChildPos</span><span class="p">),</span>
               <span class="n">rangeMinimumQueryLazyHelper</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">qlow</span><span class="p">,</span> <span class="n">qhigh</span><span class="p">,</span> <span class="n">rightChildPos</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="heap">Heap</h3>

<blockquote>
  <p>æœ¬éƒ¨åˆ†å†…å®¹å‚ç…§ã€Šç®—æ³•å¯¼è®ºã€‹</p>
</blockquote>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">private:</span>
    <span class="c1">// TODO: add specified member variable(s)</span>
    <span class="c1">// current size</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>
    <span class="c1">// total size of the heap</span>
    <span class="kt">int</span> <span class="n">capacity</span><span class="p">;</span>
    <span class="c1">// the heap pointer</span>
    <span class="n">PatientNode</span><span class="o">*</span> <span class="n">heap</span><span class="p">;</span>
</code></pre></div></div>

<p>äºŒå‰å †æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥è¢«è¿‘ä¼¼ä¸ºä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚<strong>é™¤äº†æœ€åº•å±‚ä¹‹å¤–ï¼Œè¯¥æ ‘æ˜¯å®Œå…¨å……æ»¡çš„</strong>ã€‚ä¸ºäº†æ–¹ä¾¿æ•°å­¦è¿ç®—ï¼Œæˆ‘ä»¬ä»<code class="language-plaintext highlighter-rouge">index=1</code>å¼€å§‹å­˜å‚¨å †å…ƒç´ ï¼Œåœ¨<code class="language-plaintext highlighter-rouge">segment tree</code>é‚£é‡Œæˆ‘ä»¬ä¹Ÿæåˆ°è¿‡è¿™ç§å­˜å‚¨æ–¹å¼ï¼Œä½†æ˜¯ä¸¤è€…çš„å­˜å‚¨æ–¹æ³•ç¨æœ‰ä¸åŒï¼Œå¯¼è‡´åœ¨å †ä¸­<code class="language-plaintext highlighter-rouge">i</code>èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä½ç½®ä¸º<code class="language-plaintext highlighter-rouge">[i/2]</code>ï¼Œå·¦å³å­èŠ‚ç‚¹åˆ†åˆ«ä¸ºï¼š<code class="language-plaintext highlighter-rouge">2i</code>, <code class="language-plaintext highlighter-rouge">2i+1</code>.</p>

<p>å †çš„ä¸€ä¸ªç‰¹æ€§æ˜¯ï¼š<strong>å«æœ‰nä¸ªå…ƒç´ çš„å †çš„é«˜åº¦ä¸º<code class="language-plaintext highlighter-rouge">[lgn]</code></strong></p>

<blockquote>
  <p>è¿™ä¸€ç‰¹æ€§çš„è¯æ˜å¯ä»¥é€šè¿‡åˆ©ç”¨å®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œåˆ©ç”¨å¤¹é€¼å®šç†è¿›è¡Œè¯æ˜ï¼Œå³ä¸ç­‰å¼ï¼š</p>

\[2^{h+1} - 1&gt; n &gt; 2^h\]
</blockquote>

<p><strong>æœ€å°å †æ˜¯æ„é€ ä¼˜å…ˆé˜Ÿåˆ—çš„å¸¸ç”¨æ–¹æ³•ã€‚</strong>åœ¨CS 106Xçš„è¯¾ç¨‹<a href="https://github.com/SongShaopu1998/Stanford-CS-106X/tree/main/Homework5D-Heap">ä½œä¸š</a>ä¸­ï¼Œä¹Ÿå‡ºç°äº†è¿™ä¸€ä¸»é¢˜ï¼Œåˆ†åˆ«ä½¿ç”¨é“¾è¡¨ä¸å †æ„å»ºä¼˜å…ˆçº§é˜Ÿåˆ—. è¿™é‡Œå°±ä»¥æ„å»ºæœ€å°å †ä¸ºä¾‹ï¼Œè®¨è®ºå †çš„å„ç§æ“ä½œä¸å®ç°æ–¹æ³•ï¼š</p>

<blockquote>
  <p>åœ¨ä»¥ä¸‹çš„å®ç°æ–¹æ³•ä¸­ï¼Œå‡½æ•°å‚æ•°åŒ…å«äº†æŒ‡å‘<code class="language-plaintext highlighter-rouge">heap</code>çš„æŒ‡é’ˆï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿ç‹¬ç«‹å‚ç…§ã€‚</p>
</blockquote>

<h4 id="min-heapify-olgn">MIN-HEAPIFY-O(lgn)</h4>

<p>è¿™ä¸€æ“ä½œæ˜¯ç»´æŠ¤å †æ€§è´¨çš„é‡è¦è¿‡ç¨‹ï¼Œè¾“å…¥ä¸ºä¸€ä¸ªæ•°ç»„Aå’Œä¸€ä¸ªä¸‹æ ‡<code class="language-plaintext highlighter-rouge">i</code>ï¼Œå› ä¸ºçˆ¶èŠ‚ç‚¹æœ‰å¯èƒ½å¤§äºå®ƒçš„å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¦åœ¨å †ä¸­â€œé€çº§ä¸‹é™â€(downheap)ï¼š</p>

<p>ä¸»è¦è¿‡ç¨‹æ˜¯å…ˆæ‰¾åˆ°å½“å‰èŠ‚ç‚¹ä»¥åŠå…¶ä¸¤ä¸ªå­ç»“ç‚¹ä¸­æœ€å°çš„ï¼Œå¦‚æœæœ€å°çš„èŠ‚ç‚¹ä¸æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œè€Œæ˜¯ä¸¤ä¸ªå­ç»“ç‚¹ä¸­çš„ä¸€ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦äº¤æ¢ä»–ä»¬ï¼Œå¹¶è¿›ä¸€æ­¥çš„ï¼Œå¯¹å­å †é€’å½’ä¸‹å»ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">minHeapify</span><span class="p">(</span><span class="n">PriorityQueue</span><span class="o">*&amp;</span> <span class="n">heap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// we need to find the smallest node among the current node</span>
    <span class="c1">// and its children</span>
    <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">smallest</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">size</span> <span class="o">&amp;&amp;</span> <span class="n">heap</span><span class="p">[</span><span class="n">left</span><span class="p">].</span><span class="n">priority</span> <span class="o">&lt;=</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">priority</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">right</span> <span class="o">&lt;=</span> <span class="n">size</span> <span class="o">&amp;&amp;</span> <span class="n">heap</span><span class="p">[</span><span class="n">right</span><span class="p">].</span><span class="n">priority</span> <span class="o">&lt;=</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">priority</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="n">right</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">smallest</span> <span class="o">!=</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">heap</span><span class="p">[</span><span class="n">smallest</span><span class="p">],</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="c1">// perform recursion</span>
        <span class="n">minHeapify</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">smallest</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å…³äºæ­¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œé™¤äº†å¸¸æ•°æ—¶é—´çš„å¯»æ‰¾æœ€å°å€¼ä»¥åŠäº¤æ¢æ“ä½œä¹‹å¤–ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¸€ç›´é€’å½’åˆ°æ ‘çš„å¶ç»“ç‚¹ä¸Šï¼Œè€Œå †çš„é«˜åº¦ä¸º\(logn\)ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºå¯¹æ•°æ—¶é—´ã€‚</p>

<h4 id="build-min-heap-on">BUILD-MIN-HEAP-O(n)</h4>

<p>ç”±äºåœ¨æ•°ç»„ä¸­çš„<code class="language-plaintext highlighter-rouge">[n/2] + 1</code>åˆ°<code class="language-plaintext highlighter-rouge">n</code><strong>å…¨éƒ¨ä¸ºå¶ç»“ç‚¹</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹å‰è¾¹çš„ï¼Œä¹Ÿå°±æ˜¯éå¶èŠ‚ç‚¹çš„å…ƒç´ è¿›è¡Œè‡ªåº•å‘ä¸Šçš„æ’åºï¼Œä¸æ–­åœ°æ‰©å±•å·²ç»å»ºå¥½çš„å †ï¼Œç›´åˆ°æ’åºåˆ°æ•°ç»„å‚¨å­˜ä½ç½®çš„æœ€å‰ç«¯ï¼Œä¹Ÿå°±æ˜¯<code class="language-plaintext highlighter-rouge">index=1</code>å¤„ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">buildMinHeap</span><span class="p">(</span><span class="n">PriorityQueue</span><span class="o">*&amp;</span> <span class="n">heap</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// use the minHeapfiy function</span>
        <span class="n">minHeapify</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å…³äºæ—¶é—´å¤æ‚åº¦çš„é—®é¢˜ï¼Œã€Šç®—æ³•å¯¼è®ºã€‹P88æœ‰è¯¦ç»†è¯æ˜ï¼Œç®€å•æ¥è¯´ï¼Œå¦‚æœé€šè¿‡ä»£ç æ¥çœ‹ï¼Œä¸Šç•Œåº”è¯¥æ˜¯\(O(nlgn)\)ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¸åŒèŠ‚ç‚¹ç»´æŠ¤æœ€å°å †æ€§è´¨çš„å‡½æ•°æ‰§è¡Œæ—¶é—´ä¸å †çš„é«˜åº¦æœ‰å…³ï¼Œæ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦è¯æ˜å‡ºæ¥æ˜¯ä¸<code class="language-plaintext highlighter-rouge">n</code>æˆæ­£æ¯”çš„ã€‚</p>

<h4 id="heapsort-onlgnä¸ç¨³å®š">HEAPSORT-O(nlgn)+ä¸ç¨³å®š</h4>

<p>å †æ’åºç®—æ³•åˆ©ç”¨çš„æ˜¯å †çš„æœ€å°å€¼ï¼ˆæœ€å¤§å€¼ï¼‰å§‹ç»ˆä½äºæ ¹èŠ‚ç‚¹çš„æ€§è´¨ï¼ˆ<code class="language-plaintext highlighter-rouge">heap[1]</code>ï¼‰ï¼Œæˆ‘ä»¬è€ƒè™‘åœ¨å †ä¸­ï¼Œ<strong>å°†æ ¹èŠ‚ç‚¹çš„å…ƒç´ ä¸æœ€åæœ«å°¾çš„å¶ç»“ç‚¹å…ƒç´ äº¤æ¢ï¼Œæ¥ä¸‹æ¥å»æ‰ä½äºæœ€åçš„å¶ç»“ç‚¹</strong>ï¼ˆå‚¨å­˜çš„æ˜¯åŸæœ¬çš„æ ¹èŠ‚ç‚¹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„çš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ï¼‰<strong>ï¼Œç»§ç»­ç»´æŠ¤æˆ‘ä»¬ä½™ä¸‹çš„å †ï¼Œç›´åˆ°å †çš„å¤§å°ä»<code class="language-plaintext highlighter-rouge">n-1</code>é™åˆ°2</strong>ï¼ˆå› ä¸ºåˆ°2æ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†é€šè¿‡ç»´æŠ¤å †æ¥åˆ¤å®šæœ€å€¼äº†ï¼‰ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">heapSort</span><span class="p">(</span><span class="n">PriorityQueue</span><span class="o">*&amp;</span> <span class="n">heap</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// build a min heap</span>
    <span class="n">buildMinHeap</span><span class="p">(</span><span class="n">heap</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">curSize</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">curSize</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// change the front and the end</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">heap</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
       	<span class="n">size</span><span class="o">--</span><span class="p">;</span>
        <span class="c1">// maintain the heap structure</span>
        <span class="n">minHeapify</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>åœ¨æ—¶é—´å¤æ‚åº¦ä¸Šï¼Œæˆ‘ä»¬æ³¨æ„åˆ°æ„å»ºå †è¿‡ç¨‹éœ€è¦\(O(n)\)ï¼Œè€Œæ¯æ¬¡ç»´æŠ¤å †éœ€è¦\(O(lgn)\)ï¼Œå…±éœ€è¦ç»´æŠ¤<code class="language-plaintext highlighter-rouge">n</code>æ¬¡ï¼Œæ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦ä¸º\(O(nlgn)\)ã€‚</p>

<h4 id="priority-queue-operation">Priority Queue Operation</h4>

<h5 id="heap-extract-min-olgn">HEAP-EXTRACT-MIN-O(lgn)</h5>

<p>åœ¨å­¦ä¹ äº†å †æ’åºä¹‹åï¼Œä»å †ä¸­æå–æœ€å€¼çš„æ“ä½œæ˜¾è€Œæ˜“è§ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">heapExtractMin</span><span class="p">(</span><span class="n">Priority</span><span class="o">*&amp;</span> <span class="n">heap</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
       	<span class="c1">// throw an error</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="n">heap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">heap</span><span class="p">[</span><span class="n">size</span><span class="p">];</span>
    <span class="n">size</span><span class="o">--</span><span class="p">;</span>
    <span class="c1">// maintain the heap</span>
    <span class="n">minHeapify</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">min</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ—¶é—´å¤æ‚åº¦è¾ƒä¸ºç®€å•ï¼Œä¸ºå¯¹æ•°çº§åˆ«çš„ã€‚</p>

<h5 id="heap-decrease-key-olgn">HEAP-DECREASE-KEY-O(lgn)</h5>

<p>æ­¤æ“ä½œç”¨äºæ”¹å˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­æŸä¸€å…ƒç´ çš„ä¼˜å…ˆçº§ï¼Œåœ¨æ“ä½œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è°ƒæ•´å †é¡ºåºï¼šå¦‚æœæ–°å…ƒç´ ä¼˜å…ˆçº§è¦æ¯”çˆ¶èŠ‚ç‚¹é«˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬äº¤æ¢ä»–ä»¬ï¼Œç›´åˆ°ä¸éœ€è¦äº¤æ¢çš„é‚£ä¸€åˆ»ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">heapDecreaseKey</span><span class="p">(</span><span class="n">priority</span><span class="o">*&amp;</span> <span class="n">heap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="o">&gt;=</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="c1">// throw an error</span>
    <span class="p">}</span>
    <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span> <span class="o">/</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="c1">// swap the father and the current node</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">heap</span><span class="p">[</span><span class="n">i</span> <span class="o">/</span> <span class="mi">2</span><span class="p">],</span> <span class="n">heap</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">i</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å› ä¸ºå †çš„é«˜åº¦ä¸º\(lgn\)ï¼Œæ‰€ä»¥æ­¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºå¯¹æ•°çº§åˆ«ã€‚</p>

<h5 id="min-heap-insert-olgn">MIN-HEAP-INSERT-O(lgn)</h5>

<p>åœ¨æ”¹å˜å…ƒç´ ä¼˜å…ˆçº§çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å†™å‡ºæ­¤å‡½æ•°ï¼Œå› ä¸ºè¿™ç›¸å½“äºé¦–å…ˆæ’å…¥ä¸€ä¸ªæ— é™å¤§çš„ä¼˜å…ˆçº§èŠ‚ç‚¹ï¼ˆæ’åœ¨æœ€åï¼‰ï¼Œä¹‹åæ”¹å˜å®ƒçš„ä¼˜å…ˆçº§ä¸ºæ’å…¥å…ƒç´ æœ¬åº”æœ‰çš„ä¼˜å…ˆçº§ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">minHeapInsert</span><span class="p">(</span><span class="n">priority</span><span class="o">*&amp;</span> <span class="n">heap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">size</span><span class="o">++</span><span class="p">;</span>
    <span class="n">heap</span><span class="p">[</span><span class="n">size</span><span class="p">]</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
    <span class="n">heapDecreaseKey</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="stanford-cs-106x-lecture-22-24--uiuc-cs-225--graphs">Stanford CS 106X Lecture 22-24 &amp; UIUC CS 225 â€“ Graphs</h2>

<h3 id="graph-implementation">Graph Implementation</h3>

<p>æˆ‘ä»¬å°è¯•è®¾è®¡å›¾çš„æ•°æ®ç»“æ„ï¼Œå¹¶å¯¹åº”åŒ…å«å¦‚ä¸‹æˆå‘˜å‡½æ•°ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110252156458.png" alt="image-20211025215602381" style="zoom:50%;" /></p>

<p>å›¾çš„å®ç°æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸»è¦ä»‹ç»ä»¥ä¸‹ä¸‰ç§ï¼š</p>

<ul>
  <li><strong>Edge List</strong></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110292314767.png" alt="image-20211029231403429" style="zoom:50%;" /></p>

<p>è¿™æ˜¯æœ€åŸºç¡€çš„è¡¨ç¤ºæ–¹å¼ï¼Œä½¿ç”¨<code class="language-plaintext highlighter-rouge">vector&lt;Edge&gt;</code>ï¼Œæˆ–è€…<code class="language-plaintext highlighter-rouge">set&lt;Edge&gt;</code>ï¼Œä½†ç”±äºæ€§èƒ½è¡¨ç°ä¸ç®—å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ¯”è¾ƒå°‘ã€‚</p>

<ul>
  <li><strong>Adjacency Matrix</strong></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110292331305.png" alt="image-20211029233148819" style="zoom:50%;" /></p>

<p>è¿™ç§æ–¹æ³•å°±æ˜¯é‚»æ¥çŸ©é˜µï¼Œåœ¨é‚»æ¥çŸ©é˜µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å­˜å‚¨æŒ‡å‘<code class="language-plaintext highlighter-rouge">edge</code>çš„æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥å­˜å‚¨<code class="language-plaintext highlighter-rouge">bool</code>å€¼ç”¨äºè¡¨ç¤ºä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦é‚»æ¥ï¼Œæˆ–è€…å­˜å…¥è¾¹çš„æƒé‡ï¼Œè¿™å–å†³äºå¦‚ä½•è§£å†³é—®é¢˜æ›´åŠ ç®€æ·æ–¹ä¾¿ã€‚è¿™ç§æ–¹æ³•åœ¨æ’å…¥æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œå› ä¸ºéœ€è¦æ”¹å˜é‚»æ¥çŸ©é˜µï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º\(O(n)\)ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦å¤šæ¬¡åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦äº’ä¸º<code class="language-plaintext highlighter-rouge">adjacent</code>ï¼Œé‚£ä¹ˆè¿™ç§æ•°æ®ç»“æ„ä¼šæ˜¯æœ€é«˜æ•ˆçš„ï¼Œå› ä¸ºæ­¤æ“ä½œåªéœ€è¦å¸¸æ•°çº§åˆ«çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>

<ul>
  <li><strong>Adjacency List</strong></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110292315828.png" alt="image-20211029231555417" style="zoom:50%;" /></p>

<p>é‚»æ¥è¡¨ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åœ¨é¡¶ç‚¹è¡¨ä¸­çš„æ¯ä¸€ä¸ªé¡¶ç‚¹åï¼Œéƒ½è·Ÿä¸Šä¸€ç»„<code class="language-plaintext highlighter-rouge">neighbors</code>ï¼Œä»£è¡¨äº†æ‰€æœ‰å¯¹äºè¯¥é¡¶ç‚¹çš„<code class="language-plaintext highlighter-rouge">indicent edges</code>ã€‚è¿™ç§å›¾çš„è¡¨ç¤ºæ–¹æ³•åº”ç”¨è¾ƒä¸ºå¹¿æ³›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨stlä¸­çš„<strong>list</strong>ä¸<strong>pair</strong>æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥å°†æ•´ä½“ç»“æ„è§†ä¸ºä¸€ä¸ª<strong>map</strong>ï¼Œå€¼ï¼ˆé‚»æ¥ç‚¹é›†ï¼‰ä¸º<strong>set</strong>ï¼Œä¹Ÿå³<code class="language-plaintext highlighter-rouge">Map&lt;Node, Set&lt;Node&gt;&gt;</code>.</p>

<p>è¿™ç§æ–¹æ³•çš„<strong>ä¼˜ç‚¹</strong>åœ¨äºæ’å…¥æ–°çš„èŠ‚ç‚¹æˆ–è€…è¾¹ï¼Œæˆ–è€…æˆ‘ä»¬æƒ³æ‰¾åˆ°æŸä¸€ä¸ªé¡¶ç‚¹çš„æ‰€æœ‰ç‚¹é‚»æ¥ç‚¹ï¼›<strong>ä½†æ˜¯</strong>å¦‚æœæˆ‘ä»¬æƒ³è§£å†³ç±»ä¼¼<code class="language-plaintext highlighter-rouge">topological sort</code>çš„é—®é¢˜ï¼Œæˆ–è€…æŸ¥æ‰¾è¾¹<code class="language-plaintext highlighter-rouge">a-&gt;b</code>æ˜¯å¦å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™å¯èƒ½éœ€è¦æˆ‘ä»¬éå†æ•´ä¸ªé‚»æ¥è¡¨ã€‚</p>

<p>è¿™ä¸‰ç§è®¾è®¡å„æœ‰åƒç§‹ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110252157307.png" alt="image-20211025215744223" style="zoom: 50%;" /></p>

<p>åœ¨å®é™…å®ç°ä¸­ï¼Œä¸»è¦å…³æ³¨é‚»æ¥çŸ©é˜µä¸é‚»æ¥è¡¨ã€‚å¯¹äºé‚»æ¥è¡¨ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºæˆä¸€ä¸ªåµŒå¥—çš„<code class="language-plaintext highlighter-rouge">vector</code>çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­çš„å…ƒç´ æ˜¯æŒ‡å‘é¡¶ç‚¹ç»“æ„ä½“çš„æŒ‡é’ˆã€‚å¯¹äºæœ‰å‘å›¾è€Œè¨€ï¼Œé‚»æ¥è¡¨åªèƒ½è¡¨ç¤º<strong>å‡ºåº¦</strong>ï¼Œä½†æ˜¯æ— æ³•è¡¨ç¤º<strong>å…¥åº¦</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åº”å¯¹æœ‰å‘å›¾æ—¶ï¼Œå¸¸ä¼šä½¿ç”¨<strong>é€†é‚»æ¥è¡¨</strong>çš„ç»“æ„ã€‚è€Œä¸ºäº†ç»“åˆé‚»æ¥è¡¨ä¸é€†é‚»æ¥è¡¨ï¼Œåˆå¼€å‘äº†<strong>åå­—é“¾è¡¨</strong>è¿™ä¸€æ•°æ®ç»“æ„ã€‚</p>

<h3 id="graph-attribute">Graph Attribute</h3>

<p>è®¾æ— å‘å›¾çš„é¡¶ç‚¹æ•°ä¸º\(n\)ï¼Œè¾¹æ•°ä¸º\(m\)ï¼Œç»è¿‡è¯æ˜ï¼Œè¾¹æ•°çš„èŒƒå›´æ˜¯ï¼š</p>

\[n-1 \le m \le n(n-1)/2\]

<h3 id="graph-traversal">Graph Traversal</h3>

<p>å›¾çš„éå†æ–¹æ³•ä¸»è¦æœ‰BFS, DFSç­‰ã€‚æˆ‘ä»¬å¯èƒ½éœ€è¦å¯»æ±‚ä»»æ„è·¯å¾„ã€æœ€çŸ­è·¯å¾„æˆ–è€…æ˜¯æœ€å°ä»£ä»·è·¯å¾„ã€‚</p>

<p>å…³äºæ·±åº¦ä¼˜å…ˆæœç´¢å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢è¿™ä¸¤ç§ç®—æ³•ï¼Œè¿™ä¸¤ä»½ä¼ªä»£ç æè¿°çš„ååˆ†æ¸…æ™°ï¼š</p>

<h4 id="dfs">DFS</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110260012685.png" alt="image-20211026001250419" style="zoom:50%;" /></p>

<p>æ·±åº¦ä¼˜å…ˆæœç´¢å¸¸ä¸å›æº¯ç»“åˆï¼Œæˆ‘ä»¬é¦–å…ˆæ²¿ç€ä¸€æ¡è·¯å¾„å¯»æ‰¾ä¸‹å»ï¼Œå¦‚æœæ‰¾åˆ°äº†å°±ç»“æŸå¯»æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæˆ‘ä»¬å°±ä¼šè‡ªåŠ¨å›é€€åˆ°ä¸Šä¸€æ­¥ã€‚</p>

<h4 id="bfs">BFS</h4>

<p>BFSç®—æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110260023013.png" alt="image-20211026002307702" style="zoom:50%;" /></p>

<p>ä¹‹å‰åœ¨æ ‘çš„DFSéå†ä¸BFSéå†ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æ“ä½œï¼Œè¿™ä¹Ÿè¯´æ˜äº†æ ‘å…¶å®å°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„å›¾ã€‚BFSéå†éœ€è¦å€ŸåŠ©å †æ ˆæˆ–è€…é˜Ÿåˆ—æ¥å®Œæˆï¼Œåœ¨æ¯ä¸€æ­¥ä¸­ï¼Œå…ˆå°†å½“å‰é˜Ÿåˆ—å‡ºåˆ—ï¼Œå¹¶å°†é¡¶ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®ï¼›ä¹‹åæˆ‘ä»¬å­˜å‚¨æ‰€æœ‰è¿˜æ²¡æœ‰è®¿é—®è¿‡çš„å½“å‰é¡¶ç‚¹çš„é‚»æ¥é¡¶ç‚¹è¿›å…¥é˜Ÿåˆ—ï¼ˆå¦‚æœéœ€è¦ï¼Œåˆ™è®¾ç½®è·Ÿè¸ªè·¯å¾„ï¼‰ï¼Œç›´åˆ°æˆ‘ä»¬æ‰¾åˆ°ç›®æ ‡ç‚¹æˆ–è€…é˜Ÿåˆ—ç©ºäº†ã€‚</p>

<blockquote>
  <p>ä¸ºä»€ä¹ˆBFSèƒ½å¤Ÿæ‰¾åˆ°æœ€çŸ­è·¯å¾„ï¼Ÿå› ä¸ºä½¿ç”¨çš„é˜Ÿåˆ—çš„æ•°æ®ç»“æ„ï¼Œä¿è¯æœç´¢æ·±åº¦æ¯å¢åŠ ä¸€å±‚ï¼Œæ‰€æœ‰çš„é¡¶ç‚¹éƒ½ä¼šè¢«æ›´æ–°ä¸€é</p>
</blockquote>

<p><strong>æ³¨æ„ï¼š</strong></p>

<p>åœ¨æ‰€æœ‰çš„ä¼ªä»£ç ä¸­ï¼Œæˆ‘ä»¬å‡æŠŠ<em>è®¾ç½®èŠ‚ç‚¹ä¸ºå·²è®¿é—®</em>è¿™ä¸€æ“ä½œæ”¾åˆ°<em>å‡ºåˆ—</em>è¿™ä¸€æ“ä½œä¹‹åï¼Œä½†æ˜¯åœ¨å®é™…çš„ä»£ç ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ›´å¥½çš„åšæ³•æ˜¯æŠŠ<strong>è¿™ä¸€æ“ä½œæ”¾åœ¨å°†<em>neighbor</em>å…¥é˜Ÿåˆ—çš„åè¾¹</strong>ï¼›å½“æˆ‘ä»¬åœ¨å…¶è¿˜æœªå‡ºåˆ—æ—¶è®¿é—®äº†è¯¥èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸éœ€è¦é‡å¤å†å‘é˜Ÿåˆ—ä¸­æ·»åŠ å®ƒï¼Œæ­¤æ—¶<code class="language-plaintext highlighter-rouge">!visited</code>çš„åˆ¤å®šæ¡ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´æ¥è·³è¿‡ã€‚</p>

<h3 id="dijkstras-algorithm">Dijkstraâ€™s Algorithm</h3>

<p>æ­¤ç®—æ³•å¯ä»¥è¢«è§†ä¸ºBFSç®—æ³•çš„å‡çº§ç‰ˆï¼Œå¦‚æœæ‰€æœ‰è·¯å¾„çš„ä»£ä»·éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆæ­¤ç®—æ³•å°†é€€åŒ–ä¸ºBFSã€‚</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110260110975.png" alt="image-20211026011015488" style="zoom:50%;" /></p>

<p>ä¸BFSä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<strong>ä¼˜å…ˆçº§é˜Ÿåˆ—</strong>ï¼Œä¸”<strong>æ³¨æ„</strong>ï¼š</p>

<ol>
  <li>ä¸èƒ½åœ¨æ‰¾åˆ°è¦æ±‚èŠ‚ç‚¹æ—¶åœæ­¢ï¼Œè¿™ä¹Ÿæ˜¯ä¸BFSä¸åŒçš„ä¸€ç‚¹ï¼Œå› ä¸ºå¦‚æœåœ¨æ‰¾åˆ°èŠ‚ç‚¹æ—¶ç«‹åˆ»åœä¸‹ï¼Œæ‰¾åˆ°çš„è·¯å¾„æœªå¿…æ˜¯ä»£ä»·æœ€å°çš„ï¼Œåªæœ‰å½“æ­¤èŠ‚ç‚¹ä»é˜Ÿåˆ—ä¸­å‡ºåˆ—æ—¶ï¼Œä¹Ÿå³é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬æ‰ä¼šåœæ­¢æœç´¢è¿‡ç¨‹ã€‚<strong>ä½†æ˜¯åœ¨è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬ä»éœ€è¦åœ¨å°†ç›®æ ‡ç‚¹å‡ºåˆ—åç»ˆæ­¢å¾ªç¯ï¼Œè€Œä¸èƒ½ä»…ä»…ä¾èµ–äºä¼˜å…ˆçº§é˜Ÿåˆ—éç©ºè¿™ä¸€æ¡ä»¶ï¼Œå¦åˆ™å°†ä¼šéå†è¿‡å¤šçš„ä¸å¿…é¡»èŠ‚ç‚¹</strong>ã€‚</li>
  <li>å¦‚æœæŸèŠ‚ç‚¹åœ¨æ­¤å‰çš„é˜Ÿåˆ—ä¸­å­˜åœ¨ï¼ŒBFSä¼šç›´æ¥è·³è¿‡è¯¥èŠ‚ç‚¹ï¼Œä½†æ˜¯dijkstraä¼šåˆ¤å®šä¼˜å…ˆçº§ï¼Œä»è€Œå†³å®šæ˜¯å¦æ›´æ–°æ­¤èŠ‚ç‚¹çš„ä¼˜å…ˆçº§ã€‚</li>
  <li>dijkstraç®—æ³•ä¸é€‚ç”¨äºè´Ÿæ•°æƒé‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼šåœ¨ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªè®¿é—®<strong>æ²¡è¢«æ ‡è®°ä¸ºvisited</strong>çš„èŠ‚ç‚¹ï¼Œå°±ç›¸å½“äºé»˜è®¤äº†æ‰€æœ‰æƒé‡å‡ä¸ºæ­£æ•°çš„æ¡ä»¶ï¼ˆè®¿é—®visitedèŠ‚ç‚¹å¿…ç„¶ä½¿å¾—ä»£ä»·å˜å¤§ï¼‰ï¼Œè€Œå¦‚æœæƒé‡ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆè¿™æ˜¾ç„¶æ˜¯ä¼šå‘ç”Ÿé”™è¯¯çš„ã€‚</li>
</ol>

<h3 id="a-algorithm">A* Algorithm</h3>

<p>åœ¨dijkstraç®—æ³•çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åŠ å…¥å¯å‘å¼æœç´¢çš„åŠŸèƒ½ï¼Œæ‰€è°“å¯å‘å¼æœç´¢ï¼Œä¹Ÿå³å°è¯•åˆ©ç”¨å·²æœ‰æ¡ä»¶ç»™ç®—æ³•ä¸€ä¸ªå¤§è‡´çš„æœç´¢æ–¹å‘ï¼Œå‡å°‘ä¸å¿…è¦çš„æœç´¢è¿‡ç¨‹ã€‚</p>

<blockquote>
  <p>admissible heuristic: One that never overestimates the distance.</p>

  <ul>
    <li>Okay if the heuristic underestimates sometimes</li>
  </ul>
</blockquote>

<p>æ‰€è°“<code class="language-plaintext highlighter-rouge">admissible heuristic</code>ï¼Œæ˜¯ä¸€ä¸ªæ¿€è¿›çš„å¯å‘æ–¹å¼ï¼Œæœ€ç»ˆéœ€è¦çš„ä»£ä»·å¤§æ¦‚ç‡ä¼šæ¯”æ­¤ä»£ä»·å¤§ã€‚æ­£æ˜¯ä¾é ç€è¿™ç§åŠŸèƒ½ï¼Œæˆ‘ä»¬ç»™æœç´¢ç®—æ³•ç»˜åˆ¶äº†ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">big picture</code>ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨æ¯ä¸€æ­¥çš„ä»£ä»·å˜ä¸ºï¼š</p>

\[priority(b) = cost(a, b) + Heuristic(b, c)\]

<p>åŸºç¡€çš„A*ç®—æ³•ä½¿ç”¨æ›¼å“ˆé¡¿è·ç¦»ä½œä¸ºå¯å‘å‡½æ•°ï¼š</p>

\[H(p_1, p_2) = abs(p_1.x - p_2.x) + abs(p_1.y - p_2.y)\]

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110261109598.png" alt="image-20211026110938514" style="zoom:50%;" /></p>

<p><strong>æ³¨æ„ï¼š</strong></p>

<p>ä¸dijkstraç®—æ³•ä¸€æ ·ï¼Œå½“ç›®æ ‡èŠ‚ç‚¹å‡ºåˆ—æ—¶ï¼Œå¾ªç¯ç»ˆæ­¢ï¼ŒåŒæ—¶æˆ‘ä»¬è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œ<strong><em>ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„æ’åºå‡†åˆ™æ˜¯<code class="language-plaintext highlighter-rouge">cost+H(v1,v2)</code></em>ï¼Œä½†æ˜¯æˆ‘ä»¬å‚¨å­˜åœ¨å·²éå†èŠ‚ç‚¹ä¸Šçš„<code class="language-plaintext highlighter-rouge">cost</code>ä¸èƒ½æ·»åŠ å¯å‘å‡½æ•°ï¼Œå®ƒä»ç„¶æ˜¯<code class="language-plaintext highlighter-rouge">preV's cost + edge's weight</code>ã€‚</strong>æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­åŠ å…¥å¯å‘å¼å‡½æ•°ä½œä¸ºä¼˜å…ˆçº§çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ç»™äº†æœç´¢è¿‡ç¨‹ä¸€ä¸ª<em>å…¨å±€</em>çš„è§‚å¿µï¼Œå†³å®šç€å“ªäº›å…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰åº”å½“è¢«é¦–å…ˆæœç´¢ï¼›è€Œåœ¨å…·ä½“çš„æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿç ´åå…·ä½“çš„é€‰æ‹©æŒ‡æ ‡ï¼Œå³ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨æƒé‡ä»¥åŠè¾¹çš„æƒé‡ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸€å¼€å§‹æˆ‘ä»¬åœ¨å‡ºå‘ç‚¹ä¸­å­˜å‚¨äº†0ï¼Œè€Œé<code class="language-plaintext highlighter-rouge">0+H(v1,v2)</code>çš„åŸå› ã€‚</p>

<h3 id="bidirectional-search">Bidirectional search</h3>

<p>ä¸€ç§æ›¿ä»£A*ç®—æ³•çš„æ–¹å¼æ˜¯åŒå‘æœç´¢ï¼Œä¹Ÿå³ä»èµ·ç‚¹ä¸ç»ˆç‚¹åˆ†åˆ«åŒæ—¶å¼€å§‹æœç´¢è¿‡ç¨‹ã€‚</p>

<p>å‚ç…§<em>geeksforgeeks</em>ç½‘ç«™ç»™å‡ºçš„å®ä¾‹ç¨‹åºï¼Œå®ƒåŒ…å«äº†è®¾è®¡å›¾ç±»ï¼Œé‚»æ¥è¡¨è®¾è®¡ï¼ŒBFSè®¾è®¡ä»¥åŠæœ€ç»ˆåŒå‘æœç´¢ç®—æ³•çš„å®ç°ï¼Œ æˆ‘å¯¹ä»£ç è¿›è¡Œäº†é‡æ„ï¼Œæ”¾åˆ°æˆ‘çš„<a href="https://github.com/SongShaopu1998/Graph-Algorithm-demos/tree/main/bidirectionSearch">Githubä»“åº“</a>ã€‚</p>

<h3 id="mst-problem">MST problem</h3>

<p>ä»€ä¹ˆæ˜¯æœ€å°ç”Ÿæˆæ ‘ï¼Ÿ<strong>æ„é€ è”é€šç½‘çš„æœ€å°ä»£ä»·ç”Ÿæˆæ ‘æˆä¸ºæœ€å°ç”Ÿæˆæ ‘</strong>ï¼ŒMSTé—®é¢˜çš„è§£å†³æ–¹æ³•ä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯<em>Kruskal</em>ç®—æ³•å’Œ<em>Prim</em>ç®—æ³•ï¼Œè¿™é‡Œåªè®¨è®ºå‰ä¸€ç§ç®—æ³•çš„è®¾è®¡ã€‚</p>

<h4 id="kruskals-algorithm">Kruskalâ€™s Algorithm</h4>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110262331905.png" alt="image-20211026233100555" style="zoom:50%;" /></p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110272007841.png" alt="image-20211027200746532" style="zoom:50%;" /></p>

<p><em>kruskal</em>ç®—æ³•çš„ä½¿ç”¨ä¸<strong>Union find</strong>ç´§å¯†ç»“åˆï¼Œæ‰€ä»¥é¦–å…ˆè§£å†³ä¸€ä¸‹<strong>Union find</strong>çš„é—®é¢˜ã€‚</p>

<hr />

<h4 id="union-find">Union find</h4>

<p>è¿™ç±»ç®—æ³•æ¥è‡ªäºå¹¶æŸ¥é›†â€“<em>Disjoint Set</em>ï¼ŒåŒ…å«äº†æŸ¥æ‰¾ä¸åˆå¹¶ä¸¤ç§åŸºç¡€æ“ä½œã€‚æ— è®ºé‡åˆ°ä»€ä¹ˆæ ·çš„æƒ…æ™¯ï¼Œæˆ‘ä»¬éƒ½å°†é—®é¢˜æŠ½è±¡ä¸ºå‡ ä¸ªç‹¬ç«‹çš„é›†åˆï¼Œå­˜å‚¨å…ƒç´ å‡ä¸ºæ•´æ•°ï¼Œä¸”æ‰€æœ‰å…ƒç´ å‡ä¸é‡å¤å‡ºç°ã€‚</p>

<ul>
  <li>å¯¹äºæŸ¥æ‰¾æ“ä½œï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒæ€è·¯æ˜¯æ‰¾åˆ°ä¸€ä¸ª<em>representative method</em>ï¼Œèƒ½å¤Ÿä»£è¡¨æ¯ä¸€ä¸ªç‹¬ç«‹çš„é›†åˆï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¿¡æ¯ï¼šæ‰€å¯»æ±‚çš„ä¸¤ä¸ªå…ƒç´ æ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆä¹‹å†…ï¼›</li>
  <li>å¯¹äºåˆå¹¶æ“ä½œï¼Œæˆ‘ä»¬æœ€ç»ˆçš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸€ä¸ª<em>upTree</em>ï¼Œå¹¶é€šè¿‡ä¸¤ç§ä¼˜åŒ–æ“ä½œï¼š<strong>path compression</strong> + <strong>smart union</strong>é™ä½æ‰€éœ€çš„æ—¶é—´å¤æ‚åº¦ã€‚</li>
</ul>

<p>å¹¶æŸ¥é›†çš„æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—éœ€è¦ç”¨åˆ°åé˜¿å…‹æ›¼å‡½æ•°ï¼Œç‰¹æ€§æ˜¯å¯¹äºæœ‰é™çš„æ“ä½œæ¬¡æ•°<em>n</em>ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•°çº§åˆ«çš„ï¼Œä¹Ÿå³\(O(1)\).</p>

<p>å…·ä½“æ¥è¯´ï¼Œ<strong>å¯¹äºæ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå³æ¯ä¸€ä¸ªç‹¬ç«‹å­é›†çš„è¡¨ç¤ºå…ƒç´ ï¼Œåœ¨å¹¶æŸ¥é›†ä¸­çš„å­˜å‚¨å€¼å°äº0</strong>ï¼Œå…·ä½“å­˜å‚¨çš„å€¼å› ä¸º<strong>smart union</strong>çš„å­˜åœ¨ï¼Œä¸º<strong>èŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰çš„ä¸ªæ•°</strong>ã€‚</p>

<blockquote>
  <p>å¦‚æœé‡‡å–å¦ä¸€ç§ä¼˜åŒ–ç­–ç•¥ï¼Œå³å‚¨å­˜\(-(h+1)\)ï¼Œé‚£ä¹ˆå…¶æ•ˆç‡å°†ä¸å¦‚å‚¨å­˜èŠ‚ç‚¹æ•°é«˜ã€‚å› ä¸ºå½“æˆ‘ä»¬å»ºå¥½æ²¡æœ‰ç»è¿‡è·¯å¾„å‹ç¼©çš„<em>upTree</em>åï¼ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º\(O(lgn)\)ï¼Œé‚£ä¹ˆå°†èŠ‚ç‚¹æ•°ç›®å°‘çš„æ ‘åˆå¹¶åˆ°èŠ‚ç‚¹æ•°ç›®å¤šçš„æ ‘ä¸Šæ˜¯ä¸€ç§æ›´åˆ’ç®—çš„æ“ä½œã€‚</p>
</blockquote>

<p><strong>å¯¹äºæ‰€æœ‰çš„éæ ¹èŠ‚ç‚¹</strong>ï¼Œæˆ‘ä»¬å…¨éƒ¨åœ¨å¯¹åº”çš„ä½ç½®ä¸Šå­˜å‚¨å…¶æ ¹èŠ‚ç‚¹çš„<strong>index</strong>ï¼Œç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥é¡ºç€æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®äº†ã€‚<strong>è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœä¸¤ä¸ªä½ç½®ä¸Šå­˜å‚¨äº†åŒä¸€ä¸ªæ­£æ•°ï¼Œä¹Ÿå³æ•°ç»„ä¸­çš„æŸä¸€ä¸ªä½ç½®ï¼Œé‚£ä¹ˆæ­¤ä¸¤èŠ‚ç‚¹å¿…å®šä½äºåŒä¸€ä¸ªé›†åˆä¸­ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ä¸€æ ·çš„è¡¨ç¤ºå…ƒç´ </strong>ã€‚</p>

<p>ä¸ºäº†è¿›ä¸€æ­¥å‡å°æ—¶é—´å¤æ‚åº¦ï¼Œæ˜¯ç”¨äº†è·¯å¾„å‹ç¼©çš„æŠ€å·§ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä¸ç”¨ä¸€ç›´æ²¿ç€æ ‘çš„èŠ‚ç‚¹å‘ä¸Šæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œå†åˆ¤å®šæŸ¥æ‰¾ç»“æœï¼Ÿå¦‚æœèƒ½å¤ŸæŠŠæ ‘çš„å­æ ‘å…¨éƒ¨å±•å¼€ï¼Œé‚£ä¹ˆæ•ˆæœå…¶å®æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦ç½‘ä¸Šæ‰¾ä¸€å±‚çˆ¶èŠ‚ç‚¹äº†ã€‚</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110280014973.png" alt="image-20211028001426613" style="zoom:50%;" /></p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110280015269.png" alt="image-20211028001459923" style="zoom:50%;" /></p>

<hr />

<p>ç°åœ¨å›åˆ°<em>Kruskal</em>ç®—æ³•ã€‚æˆ‘å°†ä¸€ä¸ªdemoæ”¾åˆ°äº†æˆ‘çš„<a href="https://github.com/SongShaopu1998/Graph-Algorithm-demos/tree/main/kruskal%20%26%20union%20find">Githubä»“åº“</a>.</p>

<p>æ‰€è°“æœ€å°ç”Ÿæˆæ ‘ï¼Œâ€œæœ€å°â€ï¼Œæ˜¯æŒ‡ä»£ä»·æœ€å°ï¼Œè¿™æ˜¯ç”±ä¼˜å…ˆçº§é˜Ÿåˆ—å†³å®šçš„ï¼›è€Œâ€œç”Ÿæˆæ ‘â€ï¼Œåˆ™æ˜¯ç”±å¹¶æŸ¥é›†å†³å®šçš„ï¼Œä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸€ä¸ªæœ€ç®€å•çš„å›¾ï¼šä¸‰è§’å½¢ã€‚å…¶MSTåº”å½“ä¸ºä¸¤æ¡è¾¹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å¹¶æŸ¥é›†æ—¶ï¼Œå¦‚æœå‰ä¸¤æ¡è¾¹å‡å·²è¢«åŠ å…¥äº†å¹¶æŸ¥é›†çš„<strong>forest</strong>ï¼Œé‚£ä¹ˆæ„å‘³ç€å¹¶æŸ¥é›†ä¸­<code class="language-plaintext highlighter-rouge">[0,1]</code>ï¼Œ<code class="language-plaintext highlighter-rouge">[1,2]</code>ä½ç½®çš„å…ƒç´ ï¼ˆé¡¶ç‚¹ï¼‰éƒ½è¢«æ”¾åˆ°äº†åŒä¸€ä¸ªé›†åˆä¸­ï¼Œå…·æœ‰ç›¸åŒçš„ä»£è¡¨å…ƒç´ ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ã€‚é‚£ä¹ˆå†æ¬¡å°è¯•<code class="language-plaintext highlighter-rouge">[0,2]</code>æ—¶ï¼Œå¿…å®šå‡ºç°<code class="language-plaintext highlighter-rouge">find(0) == find(2)</code>çš„ç»“æœï¼Œæ‰€ä»¥ç¬¬ä¸‰æ¡è¾¹ä¸ä¼šè¢«åŠ å…¥ã€‚</p>

<blockquote>
  <p>Union findç”¨æ¥æŸ¥æ‰¾å›¾ä¸­cycleä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚</p>
</blockquote>

<p>æ‰€ä»¥åœ¨å®ç°ä¸­ï¼Œé¦–å…ˆå°†æ‰€æœ‰ç‚¹æ„å»ºä¸€ä¸ªå¹¶æŸ¥é›†ï¼Œä¹‹åæŠŠæ‰€æœ‰çš„è¾¹åŠ å…¥åˆ°æˆ‘ä»¬çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ï¼Œå¼€å§‹ä½¿ç”¨<strong>Union find</strong>å¯»æ‰¾MSTï¼Œåªè¦ä¸¤ç‚¹è¿˜æœªè¢«è¿æ¥åˆ°ä¸€èµ·å°±åŠ å…¥MSTï¼Œå½“æ‰¾åˆ°\(n-1\)æ¡è¾¹çš„æ—¶å€™åœæ­¢ï¼ˆæ­¤æ€§è´¨ä¹‹å‰è¯´æ˜è¿‡ï¼‰ã€‚</p>

<p>å°†æ­¥éª¤åˆ†è§£åï¼Œå®¹æ˜“å¾—åˆ°<em>Kruskal</em>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º\(O(ElogV)\)ï¼Œå…¶ä¸­\(E\)ä¸ºè¾¹æ•°ï¼Œ\(V\)ä¸ºé¡¶ç‚¹æ•°ã€‚ç”±äºæ„å»ºä¼˜å…ˆçº§é˜Ÿåˆ—æœ‰ä¸¤ç§æ–¹æ³•ï¼šä½¿ç”¨<strong>sorted array</strong>æˆ–è€…<strong>heap</strong>ã€‚</p>

<ol>
  <li>heapï¼šå¦‚æœå›¾æ¯”è¾ƒå¯†é›†ï¼Œæˆ–è€…è¯´æˆ‘ä»¬å¯èƒ½ä¸éœ€è¦å»é™¤æ‰€æœ‰è¾¹ï¼ˆå †çš„removeæ“ä½œéœ€è¦å¯¹æ•°æ—¶é—´çš„å¤æ‚åº¦ï¼‰</li>
  <li>sorted arrayï¼šåœ¨æ“ä½œç»“æŸåä»ä¿å­˜ç€ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œè¿™ä¸ªç»“æœå¯èƒ½å¯¹æœªæ¥æœ‰ç”¨</li>
</ol>

<h3 id="topological-sort">Topological Sort</h3>

<p>æ‹“æ‰‘æ’åºçš„æ„ä¹‰åœ¨äºæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å›¾ä¸­æ¯ä¸ªé¡¶ç‚¹çš„<strong>å…ˆå</strong>é¡ºåºï¼Œæˆ–è€…è¯´å“ªäº›èŠ‚ç‚¹æ˜¯å¦å¤–ä¸€äº›èŠ‚ç‚¹çš„å…ˆå†³æ¡ä»¶ï¼ˆæ¯”å¦‚å¯ä»¥ç”¨äºå¯»æ‰¾å…ˆä¿®è¯¾ç¨‹è¿™ç±»çš„ï¼‰ã€‚è¯¥ç®—æ³•é€šè¿‡æŸ¥æ‰¾é¡¶ç‚¹çš„<strong>å‡ºåº¦</strong>ä¸<strong>å…¥åº¦</strong>å®ç°ã€‚</p>

<blockquote>
  <p>æ³¨æ„è¿™é‡Œè®¨è®ºçš„å¯¹è±¡æ˜¯<strong>DAG</strong>ï¼Œä¹Ÿå³æœ‰å‘æ— ç¯å›¾ã€‚</p>
</blockquote>

<h4 id="kahns-algorithm-ove">Kahnâ€™s Algorithm-O(V+E)</h4>

<p>è¯¥ç®—æ³•ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å…ˆæ‰¾åˆ°å…¥åº¦ä¸º0çš„é¡¶ç‚¹ï¼ˆå³ä¸å­˜åœ¨ä»»ä½•å…ˆå†³æ¡ä»¶ï¼‰ï¼Œæ­¤æ“ä½œå¾—ä»¥å®ç°çš„ç†ç”±æ˜¯DAGä¸å­˜åœ¨ä»»ä½•å¾ªç¯ã€‚ä¹‹åå°†è¯¥èŠ‚ç‚¹ä»¥åŠä¸å…¶ç›¸è¿çš„è¾¹å…¨éƒ¨ä»å›¾ä¸­å»æ‰ï¼Œå¹¶å°†è¯¥èŠ‚ç‚¹åŠ å…¥<code class="language-plaintext highlighter-rouge">vector</code>ä¸­ï¼›é‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110292311330.png" alt="image-20211029231101008" style="zoom:50%;" /></p>

<p>ä½†åœ¨æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¸æ–¹ä¾¿ç›´æ¥å¯¹å›¾ä¸­çš„è¾¹ä¸èŠ‚ç‚¹è¿›è¡Œåˆ é™¤æ“ä½œï¼ˆæˆ–è€…å¤åˆ¶æ“ä½œï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ©å…¶ä»–æ•°æ®ç»“æ„æ¥å®Œæˆï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110292312516.png" alt="image-20211029231248040" style="zoom:50%;" /></p>

<h2 id="stanford-cs-106x-lecture-25--hashing">Stanford CS 106X Lecture 25 â€“ Hashing</h2>

<blockquote>
  <p>æ•£åˆ—æŠ€æœ¯æ˜¯åœ¨è®°å½•çš„å­˜å‚¨ä½ç½®å’Œå®ƒçš„å…³é”®å­—ä¹‹é—´å»ºç«‹ä¸€ä¸ªç¡®å®šçš„å¯¹åº”å…³ç³»\(f\)ï¼Œä½¿å¾—æ¯ä¸ªå…³é”®å­—å¯¹åº”ä¸€ä¸ªå­˜å‚¨ä½ç½®\(f(key)\)ã€‚æˆ‘ä»¬å°†å¯¹åº”å…³ç³»\(f\)ç§°ä¸º<strong>æ•£åˆ—å‡½æ•°</strong>ï¼Œä¹Ÿå³<strong>Hash Function</strong>ã€‚ä»–çš„è¾“å‡ºè¢«ç§°ä¸º<strong>Hash Code</strong>ï¼›æ•°æ®è¢«å­˜æ”¾åœ¨ä¸€æ®µè¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸­ï¼Œè¢«ç§°ä¸º<strong>Hash Table</strong>ã€‚</p>
</blockquote>

<p>ä¸€ä¸ªè¶³å¤Ÿå¥½çš„å“ˆå¸Œå‡½æ•°ï¼Œå¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„<code class="language-plaintext highlighter-rouge">add</code>, <code class="language-plaintext highlighter-rouge">contains</code>, <code class="language-plaintext highlighter-rouge">remove</code>æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡è¢«æ§åˆ¶åœ¨\(O(1)\)ã€‚æ•£åˆ—å‡½æ•°çš„è®¾è®¡åŸåˆ™æ˜¯ä½¿å¾—æ•´ä¸ªæ•£åˆ—è¡¨çš„æ•°æ®å­˜å‚¨è¶Š<strong>åˆ†æ•£</strong>è¶Šå¥½ã€‚</p>

<h3 id="probing">Probing</h3>

<p>å¸¸ç”¨çš„ä¸€ç§æ–¹æ³•æ˜¯<strong>é™¤æ•°ç•™ä½™æ³•</strong>ã€‚<strong>ä¸€ä¸ªå¾ˆå¤§çš„è´¨æ•°ä¼šå¸®åŠ©æˆ‘ä»¬å°†æ•°æ®å˜å¾—åˆ†æ•£</strong>ã€‚åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å¾ˆå¤š<strong>å†²çª</strong>ï¼ˆ<code class="language-plaintext highlighter-rouge">collision</code>ï¼‰ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code class="language-plaintext highlighter-rouge">probing</code>ï¼Œå¯èƒ½æ˜¯çº¿æ€§çš„ï¼ˆ<strong>çº¿æ€§æ¢æµ‹</strong>ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯äºŒæ¬¡å¹‚çš„ï¼ˆ<strong>äºŒæ¬¡æ¢æµ‹</strong>ï¼‰ï¼š</p>

\[f_1(key)=(f(key)+d_i)\% m\]

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110310014748.png" alt="image-20211031001417301" style="zoom:50%;" /></p>

<p>ä½†æ˜¯è¿™äº›æ¢æŸ¥æ–¹æ³•å¯èƒ½ä¼šå½¢æˆä¸€äº›<code class="language-plaintext highlighter-rouge">clusters</code>ï¼ˆ<strong>å †ç§¯</strong>ï¼‰ï¼Œåœ¨ç›¸é‚»çš„å¤šä¸ªç‚¹ä½å†…å‡å­˜æ”¾ç€æ•°æ®ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110310016487.png" alt="image-20211031001604168" style="zoom:50%;" /></p>

<p>è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å¾ªç¯æ¢æµ‹åœ¨è¿™äº›å°é›†åˆä¸­æ˜¯å¦å­˜åœ¨æˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œç›´åˆ°æˆ‘ä»¬é‡åˆ°äº†0ï¼Œæˆ–è€…è®¾ç½®çš„ç‰¹æ®Šç»“æŸæ ‡å¿—ä½ï¼Œå†åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½çš„å­˜å‚¨ä½ç½®ç»§ç»­æ£€æµ‹ï¼Œæ˜¾ç„¶ä¼šå¤§å¤§é™ä½æˆ‘ä»¬çš„æ•ˆç‡ã€‚</p>

<h3 id="separate-chaining">Separate chaining</h3>

<p>å¦ä¸€ç§è§£å†³å†²çªçš„æ–¹æ³•æ˜¯<code class="language-plaintext highlighter-rouge">separate chaining</code>ï¼Œä¹Ÿå«<strong>é“¾åœ°å€æ³•</strong>ã€‚æ¯ä¸€ä¸ªä½ç½®é‡Œéƒ½å­˜å‚¨ç€ä¸€ä¸ªå•é“¾è¡¨ï¼Œæ‰€ä»¥åœ°å€ä¸å¯èƒ½è¢«è€—å°½ï¼Œä½†æ˜¯è¿™é™ä½æˆ‘ä»¬å¯¹æ•°æ®çš„æ“ä½œæ•ˆç‡ã€‚</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110310027433.png" alt="image-20211031002725070" style="zoom:50%;" /></p>

<h3 id="rehashing">Rehashing</h3>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ•£åˆ—è¡¨å¡«å……åˆ°<strong>ä¸€å®šç¨‹åº¦</strong>ï¼ˆ<code class="language-plaintext highlighter-rouge">load factor = (# of elements) / (hash table length)</code>ï¼‰åæ‰©å¼ æ•£åˆ—è¡¨ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬<strong>ä¸èƒ½ç®€å•çš„å°†æ•°æ®å¤åˆ¶åˆ°æ–°è¡¨çš„åŸåæ ‡</strong>ä¸­ï¼Œå› ä¸ºä½¿ç”¨<strong>é™¤æ•°ç•™ä½™æ³•</strong>ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ ¹æ®æ•°ç»„çš„é•¿åº¦å¯¹æ•°æ®è¿›è¡Œæ’åˆ—ã€‚</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110310033462.png" alt="image-20211031003326314" style="zoom: 25%;" /></p>

<h4 id="rehashing-with-separate-chaining">Rehashing with separate chaining</h4>

<p>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">separate chaining</code>æ™‚é€²è¡Œ<code class="language-plaintext highlighter-rouge">rehashing</code>çš„ä¾‹å­ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// previous array:</span>
<span class="k">using</span> <span class="n">ValueType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">K</span><span class="p">,</span> <span class="n">M</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">struct</span> <span class="nc">node</span> <span class="p">{</span>
    <span class="c1">// it's a pair</span>
    <span class="n">ValueType</span> <span class="n">value</span><span class="p">;</span>
    <span class="n">node</span><span class="o">*</span> <span class="n">next</span><span class="p">;</span>
    <span class="c1">// constructor...</span>
<span class="p">}</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">node</span><span class="o">*&gt;</span> <span class="n">buckets_array</span><span class="p">;</span>
<span class="c1">// the new array</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">node</span><span class="o">*&gt;</span> <span class="n">new_bucket_array</span><span class="p">;</span>
</code></pre></div></div>

<p>è¿™ä¸ªé—®é¢˜åº”å½“æ€ä¹ˆå»æ€è€ƒï¼Ÿé¦–å…ˆæˆ‘ä»¬æƒ³ä»–åº”å½“æœ‰ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚ç”¨äºéå†<code class="language-plaintext highlighter-rouge">array</code>ï¼Œå†…å±‚ç”¨äºéå†æ¯ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">link list</code>å¹¶å°†å…¶é‡æ–°<code class="language-plaintext highlighter-rouge">hash</code>:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">curr</span> <span class="o">:</span> <span class="n">bucket_array</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">curr</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// do something</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å¦‚ä½•æŠŠé“¾è¡¨ä¸­å¯¹åº”çš„èŠ‚ç‚¹é‡æ–°åˆ†å¸ƒåˆ°æ–°çš„è¡¨ä¸­å‘¢ï¼Ÿ</p>

<p>æˆ‘ä»¬æƒ³ï¼Œæ— è®ºå¦‚ä½•ï¼Œæ˜¯ä¼šæœ‰å¦‚ä¸‹çš„è¯­å¥çš„ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// calculate the hash value:</span>
<span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">mapped</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">_hash_function</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">%</span> <span class="n">new_bucket_count</span><span class="p">;</span>
</code></pre></div></div>

<p>å¹¶ä¸”æˆ‘ä»¬ä¸€å®šä¼šåˆ©ç”¨<code class="language-plaintext highlighter-rouge">index</code>åšè¿™ä¸€æ­¥ï¼ˆç±»ä¼¼åœ°ï¼‰ï¼Œæ¥æŠŠä¸€ä¸ªæ•°æ®ï¼ˆæŒ‡é’ˆï¼‰å¤åˆ¶åˆ°æˆ‘ä»¬çš„æ–°è¡¨ä¸­ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span><span class="p">;</span>
</code></pre></div></div>

<p>å¯æ˜¯ç°åœ¨é—®é¢˜å˜å¾—æ£˜æ‰‹ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªæ ¼å­é‡Œï¼Œä¸å¯èƒ½ä¸€ç›´éƒ½åªå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆï¼Œè€Œæ˜¯è¦å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ï¼Œå½“æˆ‘ä»¬è¿™ä¸€æ¬¡æŠŠæ ¼å­ä¸­çš„æ•°æ®æ›´æ–°ä¸ºè¿™ä¸ªæŒ‡é’ˆæ—¶ï¼Œä¸‹ä¸€æ¬¡åˆæœ‰ä¸€ä¸ªæ•°æ®æœ‰äº†ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œæˆ‘ä»¬è¯¥å’‹åŠå‘¢ï¼Ÿ</p>

<p>å‡å®šæ–°è¡¨ä¸­æ ¼å­<code class="language-plaintext highlighter-rouge">A</code>å¤„ç›®å‰å­˜æ”¾äº†æŒ‡é’ˆ<code class="language-plaintext highlighter-rouge">ptr1</code>ï¼Œæˆ‘ä»¬ç»è¿‡è®¡ç®—åæƒ³è¦æŠŠæ—§è¡¨ä¸­çš„<code class="language-plaintext highlighter-rouge">ptr2</code>ä¹Ÿæ”¾åˆ°<code class="language-plaintext highlighter-rouge">A</code>é‡Œï¼Œé‚£ä¹ˆæ˜¾ç„¶æ­¤æ—¶æœ‰ä¸¤ç§åšæ³•ï¼š</p>

<ol>
  <li>æŠŠ<code class="language-plaintext highlighter-rouge">ptr2</code>è¿æ¥åˆ°<code class="language-plaintext highlighter-rouge">ptr1</code>åè¾¹</li>
  <li>æŠŠ<code class="language-plaintext highlighter-rouge">ptr1</code>è¿æ¥åˆ°<code class="language-plaintext highlighter-rouge">ptr2</code>åè¾¹</li>
</ol>

<p>å¯¹äºæ–¹æ¡ˆ<code class="language-plaintext highlighter-rouge">1</code>ï¼Œæ ¼å­<code class="language-plaintext highlighter-rouge">A</code>çš„èµ·å§‹å€¼å§‹ç»ˆæ˜¯<code class="language-plaintext highlighter-rouge">ptr1</code>ï¼Œè¿™ç›¸å½“äºé“¾è¡¨çš„<strong>å°¾æ’æ³•</strong>ï¼Œæ„å‘³ç€æ¯æ¬¡æˆ‘ä»¬éƒ½è¦éå†åˆ°<code class="language-plaintext highlighter-rouge">A</code>æ ¼çš„é“¾è¡¨çš„æœ€åæ¥æ’å…¥æ–°æ•°æ®ï¼›</p>

<p>è€Œæ–¹æ¡ˆ<code class="language-plaintext highlighter-rouge">2</code>æ˜¯<strong>å¤´æ’æ³•</strong>ï¼Œæ˜¾ç„¶æˆ‘ä»¬åªéœ€è¦è°ƒæ•´å‡ ä¸ªæŒ‡é’ˆä½ç½®â€“å…ˆæŠŠ<code class="language-plaintext highlighter-rouge">ptr1</code>è¿æ¥åˆ°<code class="language-plaintext highlighter-rouge">ptr2</code>ï¼Œå†æŠŠå½“å‰<code class="language-plaintext highlighter-rouge">ptr1</code>æ‰€åœ¨çš„<code class="language-plaintext highlighter-rouge">A</code>æ ¼å­é‡Œçš„ä½ç½®è…¾ç»™<code class="language-plaintext highlighter-rouge">ptr2</code>ï¼Œå°±å¯ä»¥å®ç°æ’å…¥æ“ä½œï¼Œæ•…<code class="language-plaintext highlighter-rouge">2</code>æ˜¯æ•ˆç‡æ›´é«˜çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å°è¯•å†™å‡ºä»£ç ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">curr</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
<span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span><span class="p">;</span>
<span class="c1">// go forward</span>
<span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</code></pre></div></div>

<p>ä½†æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">temp</code>æŒ‡é’ˆæ¥è®°å½•æŒ‡é’ˆå½“å‰ä½ç½®ï¼Œå¦åˆ™ä¸€åˆ‡éƒ½é”™ä¹±äº†ï¼åŒæ—¶æˆ‘ä»¬ä¹Ÿè¦ç•™å¿ƒ<code class="language-plaintext highlighter-rouge">curr=curr-&gt;next</code>è¿™æ¡è¯­å¥çš„ä½ç½®ï¼Œå› ä¸ºå¯¹<code class="language-plaintext highlighter-rouge">temp-&gt;next</code>èµ‹å€¼è¿™ä¸ªæ“ä½œç›¸å½“äºåˆ‡æ–­äº†<code class="language-plaintext highlighter-rouge">temp</code>æŒ‡é’ˆåŸæœ¬çš„é€šè·¯ï¼ŒæŠŠ<code class="language-plaintext highlighter-rouge">temp</code>å³æˆ‘ä»¬å‰è¿°çš„<code class="language-plaintext highlighter-rouge">ptr2</code>æŒ‡é’ˆå’Œ<code class="language-plaintext highlighter-rouge">ptr1</code>ç»™è¿èµ·æ¥äº†ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">curr</span><span class="p">;</span>
<span class="n">curr</span> <span class="o">=</span> <span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
<span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
</code></pre></div></div>

<p>æœ€åï¼Œyiæ‰€æœ‰æ—§è¡¨å†…çš„æŒ‡é’ˆéƒ½è¢«æˆ‘ä»¬é“¾æ¥å¹¶è½¬ç§»åˆ°äº†æ–°è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code class="language-plaintext highlighter-rouge">std::move</code>æ“ä½œæ¥å°†æ–°çš„<code class="language-plaintext highlighter-rouge">vector</code>èµ‹å€¼ç»™æ—§çš„ç±»æˆå‘˜<code class="language-plaintext highlighter-rouge">vector</code>:</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">curr</span> <span class="o">:</span> <span class="n">bucket_array</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">curr</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">mapped</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">_hash_function</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">%</span> <span class="n">new_bucket_count</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">curr</span><span class="p">;</span>
        <span class="n">curr</span> <span class="o">=</span> <span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
        <span class="n">new_bucket_array</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">bucket_array</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">new_bucket_array</span><span class="p">);</span>
</code></pre></div></div>

<p>å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹ï¼Œæ˜¯è¿™æ®µä»£ç ä¸­çš„<strong>å¼•ç”¨</strong>ä½¿ç”¨é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³æ›´æ”¹ç±»æœ¬èº«ï¼Œåˆ™åœ¨<code class="language-plaintext highlighter-rouge">for</code>å¾ªç¯å¤„ä¸è¦ä½¿ç”¨å¼•ç”¨ä¼ é€’ï¼Œè€Œåœ¨è¿™é‡Œï¼Œä¼ é€’å¼•ç”¨ä¹‹åè¿›è¡Œ<code class="language-plaintext highlighter-rouge">curr=temp-&gt;next</code>çš„æ“ä½œæ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬æƒ³è¦å°†æ—§è¡¨ä¸­<code class="language-plaintext highlighter-rouge">A</code>æ ¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ›¿æ¢æ‰ã€‚</p>

<h3 id="good-hashcode-behavior">Good hashCode behavior</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Consistency with itself</code></li>
</ul>

<blockquote>
  <p>hasCode(x) = hashCode(x)</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Consistency with equality</code></li>
</ul>

<blockquote>
  <p>a == b â€“&gt; hashCode(a) == hashCode(b)</p>

  <p>a != b -/&gt; hasCode(a) == hashCode(b)</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Good distribution of hash codes</code></li>
</ul>

<h3 id="possible-hashcode-for-strings">Possible hashCode (for strings)</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110310042137.png" alt="image-20211031004222730" style="zoom:50%;" /></p>

<blockquote>
  <p>JAVAå†…ç½®çš„ç®—æ³•</p>
</blockquote>

<h3 id="hashset--hashmap">hashSet &amp; hashMap</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110310044941.png" alt="image-20211031004403501" style="zoom:50%;" /></p>

<h2 id="stanford-cs-106x--lecture-26-27--inheritance--composition---polymorphism">Stanford CS 106X  Lecture 26-27 â€“ Inheritance &amp; Composition &amp;  Polymorphism</h2>

<h3 id="inheritance">Inheritance</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">call super class constructor</code></li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SubclassName</span><span class="o">::</span><span class="n">SubclassName</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">SuperclassName</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">statements</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">call superclass member</code></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110311356056.png" alt="image-20211031135645606" style="zoom:50%;" /></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">private inheritance</code></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110311359361.png" alt="image-20211031135906905" style="zoom:50%;" /></p>

<p>è¿™ä¸ªæ“ä½œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åœ¨ç±»å¤–éƒ¨ï¼Œæˆ‘ä»¬æ— æ³•å¾—çŸ¥ä¸¤è€…æ˜¯ç»§æ‰¿çš„å…³ç³»ã€‚</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pure virtual functions</code></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110311401073.png" alt="image-20211031140113674" style="zoom:50%;" /></p>

<p>å¯¹äº<code class="language-plaintext highlighter-rouge">virtual</code>å…³é”®å­—ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼šå¦‚æœæƒ³ç»§æ‰¿æŸä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸åŠ è¯¥å…³é”®å­—ï¼Œç¨‹åºå¯ä»¥æ­£å¸¸ç¼–è¯‘ï¼Œæ–°çš„ç»§æ‰¿å‡½æ•°ä¹Ÿå¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œä½†è¿™ä¼šå¯¼è‡´ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸çŸ¥é“å»è°ƒç”¨æ–°çš„ç»§æ‰¿å‡½æ•°ï¼ˆç¼ºå°‘äº†<strong>åŠ¨æ€ç»‘å®š</strong>çš„è¿‡ç¨‹ï¼‰ã€‚</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">multiple inheritance</code></li>
</ul>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110311402462.png" alt="image-20211031140216016" style="zoom:50%;" /></p>

<h3 id="polymorphism">Polymorphism</h3>

<blockquote>
  <p>Polymorphism is the the ability for the same code to be used with different types of objects and behave differently with each.</p>

  <p>For example, even if you have a pointer to a superclass, if you call a method that a subclass overrides, it will call the <strong>subclassâ€™s implementation</strong>.</p>

  <p>Polymorphism is important because for instance by default, with a vector of the same type of object, you might expect that calling a method on all of them would execute the exact same code.</p>

  <p>Polymorphism means that is not true!</p>

  <p>With <strong>templates</strong>, we create one class that works with any type parameter. At <strong>compile-time</strong>, C++ generates a version of this class for each type it will be used with.  This is called <strong>compile-time polymorphism</strong>.</p>

  <p>With <strong>inheritance</strong>, we create multiple classes that inherit and override behavior from each other. C++ instead figures it out at <strong>runtime</strong> using a virtual table of methods.  This is called <strong>run-time polymorphism</strong>.</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mystery problem</code></li>
</ul>

<p>å¯¹äºå¦‚ä¸‹çš„ç»§æ‰¿å…³ç³»ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110312240076.png" alt="image-20211031224055988" style="zoom:50%;" /></p>

<p>æˆ‘ä»¬è®¨è®º<strong>ç¬¬ä¸€ç§</strong>æƒ…å†µï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110312240802.png" alt="image-20211031224037725" /></p>

<p>ä¹Ÿå³åœ¨ç¼–è¯‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çœ‹å˜é‡ç±»å‹æ˜¯å¦åŒ…å«æ­¤æ–¹æ³•ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œè¯¥æˆå‘˜å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„æ˜¯å¯¹è±¡ç±»å‹ä¸­çš„è¯¥æˆå‘˜å‡½æ•°ã€‚<strong>Ploymorphism: å¦‚æœ<code class="language-plaintext highlighter-rouge">object type</code>ä¸­æ²¡æœ‰æ‰¾åˆ°è¿™ç§æˆå‘˜å‡½æ•°ï¼Œé‚£ä¹ˆç±»ä¼¼äºCS 61Aä¸­pythonä¸æ–­å‘ä¸Šå¯»æ‰¾<code class="language-plaintext highlighter-rouge">parent frame</code>çš„æ–¹æ³•ç±»ä¼¼ï¼ŒC++ä¹Ÿä¼šç»§ç»­å°è¯•åœ¨åŸºç±»ã€åŸºç±»çš„åŸºç±»ä¸­å¯»æ‰¾è¯¥æˆå‘˜å‡½æ•°ï¼Œç›´åˆ°ç¬¬ä¸€æ¬¡é‡åˆ°å®ƒã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨åŸºç±»çš„<code class="language-plaintext highlighter-rouge">A</code>æ–¹æ³•ä¸­è°ƒç”¨æŸä¸ªæ–¹æ³•<code class="language-plaintext highlighter-rouge">B</code>ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨<code class="language-plaintext highlighter-rouge">::</code>æ ‡è®°ï¼Œé‚£ä¹ˆå½“ç¼–è¯‘å™¨æ‰¾åˆ°å¹¶æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">parent frame</code>ä¸­çš„<code class="language-plaintext highlighter-rouge">A</code>æ–¹æ³•å¹¶æ‰§è¡Œåˆ°<code class="language-plaintext highlighter-rouge">B</code>å¤„æ—¶ï¼Œå› ä¸ºæˆå‘˜å‡½æ•°ä¼ å…¥çš„ä»ç„¶æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡çš„åœ°å€ï¼Œä¼šé¦–å…ˆå›åˆ°æ´¾ç”Ÿç±»å®šä¹‰å¤„ï¼Œå°è¯•æ‰§è¡Œæ–¹æ³•<code class="language-plaintext highlighter-rouge">B</code>ï¼Œå¦‚æœå¸¦äº†<code class="language-plaintext highlighter-rouge">::</code>æ ‡è®°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šç›´æ¥åˆ°å¯¹åº”çš„ç±»ä¸­å¼€å§‹å¯»æ‰¾ï¼Œå¹¶é‡å¤ä¸Šè¿°è¿‡ç¨‹</strong>ã€‚</p>

<p><strong>ç¬¬äºŒç§</strong>æƒ…å†µï¼šï¼ˆç±»å‹è½¬æ¢ï¼‰</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110312240968.png" alt="image-20211031224022874" style="zoom:50%;" /></p>

<p>ä¸ç¬¬ä¸€ç§æƒ…å†µç±»ä¼¼ï¼Œåœ¨ç¼–è¯‘æ—¶æˆ‘ä»¬æŸ¥çœ‹çš„æ˜¯å·¦ä¾§å˜é‡çš„ç±»å‹ï¼Œä¹Ÿå³ç±»å‹è½¬æ¢ä¹‹åçš„ç±»å‹ï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶ï¼ŒæŒ‡å‘çš„æ˜¯<code class="language-plaintext highlighter-rouge">object</code>çš„æˆå‘˜å‡½æ•°ã€‚</p>

<p>åŒæ—¶éœ€è¦æ³¨æ„ï¼Œ<code class="language-plaintext highlighter-rouge">object</code>ç±»å‹ä¸èƒ½æ˜¯<code class="language-plaintext highlighter-rouge">cast</code>ç±»å‹çš„åŸºç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç§è½¬æ¢æ–¹æ³•åªèƒ½åš<strong>å‘ä¸Šç±»å‹è½¬æ¢</strong>ï¼Œå½“<strong>å‘ä¸Šå¼ºåˆ¶ç±»å‹è½¬æ¢</strong>å‡ºç°æ—¶ï¼ŒåŸæ´¾ç”Ÿç±»çš„å¯¹è±¡å†…å®¹è¢«<strong>åˆ‡å‰²</strong>(<code class="language-plaintext highlighter-rouge">object slicing</code>)ã€‚åè¿‡æ¥ï¼Œå¦‚æœæ˜¯åŸºç±»æƒ³è¦å¼ºåˆ¶è½¬æ¢ä¸ºæ´¾ç”Ÿç±»ï¼Œå°†ä¼šå´©æºƒæˆ–è€…äº§ç”Ÿæœªå®šä¹‰è¡Œä¸ºã€‚</p>

<h2 id="stanford-cs-106x-lecture-26--sorting">Stanford CS 106X Lecture 26 â€“ Sorting</h2>

<blockquote>
  <p><strong>ç¨³å®š</strong>ï¼šå¦‚æœåŸæ•°ç»„ä¸­ç›¸åŒå¤§å°çš„ä¸¤ä¸ªæ•°æ®åœ¨æ’åºå‰åçš„ä½ç½®å…³ç³»ä¸å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ã€‚</p>
</blockquote>

<h3 id="selection-sort-on2ä¸ç¨³å®š">selection sort-\(O(n^2)\)+ä¸ç¨³å®š</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110312323283.png" alt="image-20211031232346175" style="zoom:50%;" /></p>

<p>åŸºæœ¬æ€è·¯æ˜¯é€æ¸æ‰©å±•å·²ç»æ’åºå¥½çš„<code class="language-plaintext highlighter-rouge">sublist</code>ï¼Œæ¯æ¬¡åœ¨ä¹‹åçš„åºåˆ—ä¸­æ‰¾åˆ°æœ€å°çš„æ•°æ®çš„ä½ç½®ï¼Œå¹¶å°†å…¶ä¸èµ·ç‚¹æ•°æ®äº¤æ¢ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">selectionSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// we need to find the smallest index</span>
        <span class="kt">int</span> <span class="n">minIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// find the index of smallest remaining value</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">v</span><span class="p">[</span><span class="n">minIndex</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">minIndex</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">// swap the smallest value to proper place -- v[i]</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="n">minIndex</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="insertion-sort-on2ç¨³å®š">insertion sort-\(O(n^2)\)+ç¨³å®š</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110312337665.png" alt="image-20211031233718577" style="zoom:50%;" /></p>

<p>ä¸é€‰æ‹©æ’åºçš„æ€è·¯ç›¸åï¼Œæ’å…¥æ’åºæ˜¯ç›´æ¥é€‰æ‹©åè¾¹ä¸€ä½çš„æ•°æ®ï¼Œå¹¶å°è¯•åœ¨å‰è¾¹çš„æœ‰åºæ•°ç»„ä¸­æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ¯”é€‰æ‹©æ’åºä¸æ’å…¥æ’åºçš„ä»£ç ï¼Œè¿™ä¸¤è€…å…¶å®æ˜¯ååˆ†ç±»ä¼¼çš„ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202110312346470.png" alt="image-20211031234632396" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">insertSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// we need to keep the current value</span>
        <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="c1">// slide elements to make room for v[i]</span>
        <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">temp</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
            <span class="n">j</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="merge-sort-onlognç¨³å®š">merge sort-\(O(nlogn)\)+ç¨³å®š</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010001997.png" alt="image-20211101000129867" style="zoom:50%;" /></p>

<p>å½’å¹¶æ’åºå°†æ•°ç»„åˆ†ä¸ºä¸¤åŠï¼Œåˆ†åˆ«å¯¹ä¸¤åŠè¿›è¡Œæ’åºï¼Œä¹‹åå†æŠŠå·²ç»æ’åºå¥½çš„ä¸¤ä¸ªå­æ•°ç»„ç»„åˆåœ¨ä¸€èµ·ï¼ˆ<code class="language-plaintext highlighter-rouge">merge</code>ï¼‰ã€‚è¿™ä¸€è¿‡ç¨‹å¯ç”¨å¦‚ä¸‹å›¾è¡¨ç¤ºï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010004508.png" alt="image-20211101000424396" style="zoom:50%;" /></p>

<p><code class="language-plaintext highlighter-rouge">merge</code>æ“ä½œæ˜¯å½’å¹¶æ’åºä¸­ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„éƒ¨åˆ†ï¼Œå…¶å®å¹¶ä¸éš¾ç†è§£ï¼Œä¸»è¦è¿‡ç¨‹å°±æ˜¯ä½¿ç”¨ç±»ä¼¼äº<strong>åŒæŒ‡é’ˆ</strong>çš„æƒ³æ³•ï¼Œé€æ­¥æ¢æŸ¥ä¸¤ä¸ªå­æ•°ç»„å„è‡ªçš„å…ƒç´ ï¼ŒæŒ‰é¡ºåºå°†ä»–ä»¬åˆå¹¶åˆ°ä¸€èµ·ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010006095.png" alt="image-20211101000634986" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">mergeSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if size is less than 2, we can just return that element</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// split vector into two halves</span>
        <span class="kt">size_t</span> <span class="k">const</span> <span class="n">half_size</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="n">half_size</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">right</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="n">half_size</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        
        <span class="c1">// recursively sort the two halves</span>
        <span class="n">mergeSort</span><span class="p">(</span><span class="n">left</span><span class="p">);</span>
        <span class="n">mergeSort</span><span class="p">(</span><span class="n">right</span><span class="p">);</span>
        
        <span class="c1">// merge the sorted halves into a sorted whole</span>
        <span class="n">v</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
        <span class="n">merge</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">left</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// double pointers</span>
    <span class="kt">int</span> <span class="n">i1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">left</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="n">right</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// taken from left</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i2</span> <span class="o">&gt;=</span> <span class="n">right</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">||</span>
           <span class="p">(</span><span class="n">i1</span> <span class="o">&lt;</span> <span class="n">left</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">left</span><span class="p">[</span><span class="n">i1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">[</span><span class="n">i2</span><span class="p">]))</span> <span class="p">{</span>
            <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">left</span><span class="p">[</span><span class="n">i1</span><span class="o">++</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="c1">// taken from right</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">right</span><span class="p">[</span><span class="n">i2</span><span class="o">++</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—å¯ä»¥æ ¹æ®ä¸‹å›¾å¾—å‡ºï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010041500.png" alt="image-20211101004116394" style="zoom:50%;" /></p>

<p>æ¯æ¬¡<code class="language-plaintext highlighter-rouge">merge</code>æ“ä½œéƒ½éœ€è¦\(O(n)\)çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ•´ä¸ªé«˜åº¦å› ä¸ºæ¯æ¬¡ç¼©å°ä¸€åŠï¼Œä¸ºå¯¹æ•°çº§åˆ«ï¼Œæ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦ä¸º\(O(nlgn)\).</p>

<h3 id="quick-sort-onlognä¸ç¨³å®š">quick sort-\(O(nlogn)\)+ä¸ç¨³å®š</h3>

<p>å¿«é€Ÿæ’åºæ˜¯ä½¿ç”¨åˆ†æ²»ç®—æ³•çš„ä¸€ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œé€šè¿‡ä»åŸæ•°ç»„ä¸­é€‰å‡ºä¸€ä¸ª<code class="language-plaintext highlighter-rouge">pivot</code>å¹¶æ ¹æ®æ­¤æ•°å€¼å°†åŸæ•°ç»„åˆ†ä¸ºå°äº<code class="language-plaintext highlighter-rouge">pivot</code>å’Œå¤§äº<code class="language-plaintext highlighter-rouge">pivot</code>çš„ä¸¤éƒ¨åˆ†ï¼Œå¹¶æŠŠ<code class="language-plaintext highlighter-rouge">pivot</code>æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼›å†åˆ†åˆ«ä»å·¦å³ä¸¤éƒ¨åˆ†ä¸­é‡å¤æ­¤è¿‡ç¨‹â€¦</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010054061.png" alt="image-20211101005425992" style="zoom:50%;" /></p>

<p>ä¾‹å­ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010055243.png" alt="image-20211101005514131" style="zoom:50%;" /></p>

<p><code class="language-plaintext highlighter-rouge">pivot</code>çš„é€‰æ‹©å°†ä¼šç›´æ¥å½±å“æœ€ç»ˆçš„è¿è¡Œæ•ˆç‡ï¼š</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111010053357.png" alt="image-20211101005358245" style="zoom:50%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">quickSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">quickSortHelper</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">quickSortHelper</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="kt">int</span> <span class="n">min</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// base case, no need to sort</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// choose pivot: use the first element</span>
    <span class="kt">int</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">min</span><span class="p">];</span>
    <span class="c1">// move pivot to the end</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">min</span><span class="p">,</span> <span class="n">max</span><span class="p">);</span>
    
    <span class="c1">// partition the two sides of the array from 0 to N-1</span>
    <span class="kt">int</span> <span class="n">middle</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">min</span><span class="p">,</span> <span class="n">max</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pivot</span><span class="p">);</span>
    
    <span class="c1">// restore pivot to proper location</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">middle</span><span class="p">,</span> <span class="n">max</span><span class="p">);</span>
    
    <span class="c1">// recursively sort the left and right partitions</span>
    <span class="c1">// note we should not include "middle"</span>
    <span class="n">quickSortHelper</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">min</span><span class="p">,</span> <span class="n">middle</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">quickSortHelper</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">middle</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">max</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">partition</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// move towards the center</span>
        <span class="c1">// until we find a pair of out-of-order elements</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">j</span> <span class="o">&amp;&amp;</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">j</span> <span class="o">&amp;&amp;</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">j</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">j</span><span class="o">--</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—ç±»ä¼¼äºå½’å¹¶æ’åºï¼Œä¹Ÿæ˜¯\(O(nlgn)\)ï¼Œä¸”å¿«é€Ÿæ’åºæ˜¯ä¸€ç§<strong>ä¸ç¨³å®š</strong>çš„æ’åºç®—æ³•ã€‚</p>

<h3 id="heap-sort-onlgnä¸ç¨³å®š">Heap sort-\(O(nlgn)\)+ä¸ç¨³å®š</h3>

<p>å †æ’åºçš„å†…å®¹åœ¨å…ˆå‰å †çš„éƒ¨åˆ†æåˆ°è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>

<h3 id="counting-sort-onkç¨³å®š">Counting sort-\(O(n+k)\)+ç¨³å®š</h3>

<blockquote>
  <p>\(k\)ä¸ºå¾…æ’åºæ•°æ®çš„å€¼åŸŸå¤§å°</p>
</blockquote>

<p>å¸¸è¢«ç”¨ä½œå…¶ä»–æ’åºç®—æ³•çš„<strong>å­ç¨‹åº</strong>ã€‚è¿™ç§æ’åºç®—æ³•ä¸æ˜¯åŸºäºæ¯”è¾ƒçš„ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯ä¸€ç§<strong>ç¨³å®š</strong>çš„æ’åºç®—æ³•ã€‚ç®—æ³•çš„åŸºæœ¬åŸç†æ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°æ‰€æœ‰å°äºæŸä¸€ä¸ªæ•°æ®çš„å…ƒç´ æ•°ç›®ï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥å¾—çŸ¥è¯¥æ•°æ®åº”å½“è¢«æ”¾åˆ°æ’åºæ•°ç»„çš„å“ªä¸ªä½ç½®ã€‚æ‰€ä»¥åœ¨å®ç°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>è®¡æ•°æ•°ç»„</strong>å‚¨å­˜æ‰€æœ‰æ•°æ®å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶æŠŠå®ƒä»¬çš„æ¬¡æ•°ä»å‰åˆ°å<strong>å åŠ </strong>ï¼ˆå¦‚æœéœ€è¦é™åºæ’åˆ—ï¼Œå°±ä»åå‘å‰å åŠ å‡ºç°æ¬¡æ•°ï¼‰ã€‚ä¹‹åä¾¿å¯ä»¥åˆ©ç”¨æŒ¨ä¸ªå‚¨å­˜äº†<code class="language-plaintext highlighter-rouge">sumCount</code>çš„ç»“æœçš„æ•°ç»„ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">hashTable</code>ï¼‰å¾—åˆ°æ’åºç»“æœäº†ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// an example</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
<span class="kt">void</span> <span class="nf">countingSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// range of data</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="o">*</span><span class="n">max_element</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="c1">// the assist array</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sumCount</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="c1">// First, store the count of elements in the assiat array</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sumCount</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Second, transfrom the count into sumCount in the assist array</span>
    <span class="c1">// if we want to sort the data in descending order, we need to traverse</span>
    <span class="c1">// from k-1 to 1</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sumCount</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sumCount</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// Third, use the sumCount to get a sorted array</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// NOTICE: there should be a minus 1 in the expression</span>
        <span class="n">result</span><span class="p">[</span><span class="n">sumCount</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">sumCount</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæˆ‘ä»¬éå†ï¼ˆç»„æˆæœ‰åºæ•°ç»„ï¼‰çš„é¡ºåºæ˜¯è‡ªåå‘å‰ï¼Œè€Œéè‡ªå‰å‘åï¼Œå¦åˆ™æ’åºç®—æ³•å°†<strong>ä¸ç¨³å®š</strong>ï¼Œåœ¨ä¹‹åçš„åŸºæ•°æ’åºä¸­ä¹Ÿèƒ½ä½“ç°å‡ºè¿™ä¸€ç‚¹ã€‚</p>

<p>æ—¶é—´å¤æ‚åº¦å› ä¸ºå­˜åœ¨<code class="language-plaintext highlighter-rouge">v.size()</code>ä¸<code class="language-plaintext highlighter-rouge">k</code>è¿™ä¸¤ä¸ªç»´åº¦ï¼Œæ‰€ä»¥æœ€ç»ˆæ˜¯\(O(n+k)\). <strong>å¦‚æœ\(k=O(n)\)ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º\(O(n)\)ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨è®¡æ•°æ’åºç®—æ³•</strong>ã€‚</p>

<h3 id="radix-sort-ontimes-kç¨³å®š">Radix sort-\(O(n\times k)\)+ç¨³å®š</h3>

<blockquote>
  <p>\(k\)ä¸ºæ•°å­—ä½æ•°</p>
</blockquote>

<p>æ³¨æ„åˆ°è®¡æ•°æ’åºçš„ä½¿ç”¨æ¡ä»¶æ˜¯\(k=O(n)\)ï¼Œè¯•æƒ³å½“\(k=O(n^2)\)æ—¶ï¼Œä½¿ç”¨è®¡æ•°æ’åºæ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©äº†ã€‚ä½†æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è®¡æ•°æ’åºï¼Œæˆ–è€…æ˜¯ä»»æ„ä¸€ç§<strong>ç¨³å®š</strong>çš„æ’åºç®—æ³•ï¼Œå®Œæˆ<strong>åŸºæ•°æ’åº</strong>çš„æ’åºç®—æ³•ã€‚</p>

<p>åŸºæ•°æ’åºçš„æ€è·¯å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä»ä½ä½åˆ°é«˜ä½ï¼Œé’ˆå¯¹æ¯ä¸€ä½æ•°å­—ä½¿ç”¨ç¨³å®šçš„æ’åºç®—æ³•ï¼Œåˆ†å¤šæ¬¡å¯¹æ•´ä¸ªåºåˆ—æ’åºï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">countingSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="kt">int</span> <span class="n">exp</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sumCount</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="c1">// statistic: number counts</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sumCount</span><span class="p">[(</span><span class="n">i</span> <span class="o">/</span> <span class="n">exp</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// calculate the sumCount</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sumCount</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sumCount</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// in order, put them into a sorted array</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">result</span><span class="p">[</span><span class="n">sumCount</span><span class="p">[(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">exp</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">sumCount</span><span class="p">[(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">exp</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// change v into result</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">radixSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="o">*</span><span class="n">max_element</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="c1">// process each digit from low to high</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">exp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">max</span> <span class="o">/</span> <span class="n">exp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">exp</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">countingSort</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">exp</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ—¶é—´å¤æ‚åº¦ç®€å•æ¥è¯´ï¼Œå°±æ˜¯éœ€è¦å¯¹æ¯ä¸€ä½è¿›è¡Œæ’åºï¼Œè€Œæ¯ä¸€æ¬¡<strong>è®¡æ•°æ’åº</strong>éƒ½æ˜¯\(O(n)\)çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥å¤§è‡´ä¸º\(O(n\times k)\).</p>

<h3 id="bucket-sort-onkç¨³å®š">Bucket sort-\(O(n+k)\)+ç¨³å®š</h3>

<blockquote>
  <p>\(k\)ä¸ºæ¡¶çš„æ•°é‡</p>
</blockquote>

<p>æ¡¶æ’åºä¸»è¦åº”ç”¨äºæ•°æ®æ¯”è¾ƒ<strong>å‡åŒ€çš„åˆ†å¸ƒ</strong>åœ¨æŸä¸ªèŒƒå›´å†…æ—¶ã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼šæ•°ç»„å†…çš„æ•°æ®å…¨éƒ¨ä¸ºå°æ•°ï¼Œé‚£ä¹ˆæ­¤æ—¶ä½¿ç”¨<strong>è®¡æ•°æ’åº</strong>æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>æ¡¶æ’åº</strong>æ¥å®Œæˆã€‚æˆ‘ä»¬é¦–å…ˆæ ¹æ®æ¡¶çš„æ€»æ•°é‡è®¡ç®—å‡ºè¦æŠŠæ•°æ®åˆ†æˆçš„åŒºé—´æ•°<code class="language-plaintext highlighter-rouge">divider</code>ï¼Œä¹‹åè®¡ç®—<code class="language-plaintext highlighter-rouge">i/divider</code>å¯ä»¥å¾—åˆ°å…ƒç´ éœ€è¦æ”¾å…¥çš„æ¡¶çš„ç¼–å·ï¼›å†å°†æ‰€æœ‰å…ƒç´ æ”¾å…¥å¯¹åº”çš„æ¡¶ä¹‹åï¼Œå¯¹æ¯ä¸ªæ¡¶å†…å…ƒç´ æ’åºï¼Œå†æŠŠæ‰€æœ‰å…ƒç´ ç»„åˆåˆ°ä¸€èµ·å³å¯ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">bucKetSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bucketNum</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">max</span> <span class="o">=</span> <span class="o">*</span><span class="n">max_element</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="c1">// how many small ranges we need to divide the data into?</span>
    <span class="kt">int</span> <span class="n">divider</span> <span class="o">=</span> <span class="n">ceil</span><span class="p">((</span><span class="n">max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">bucketNum</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">bucketResult</span><span class="p">[</span><span class="n">bucketNum</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">i</span> <span class="o">:</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// store the data</span>
        <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">divider</span><span class="p">;</span>
        <span class="n">bucketResult</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// perform sort in each bucket</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">bucketNum</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">bucketResult</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">begin</span><span class="p">(),</span> <span class="n">bucketResult</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span><span class="p">());</span>
        <span class="c1">// concatenate them into the result</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">j</span> <span class="o">:</span> <span class="n">bucketResult</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ˜¾è€Œæ˜“è§åœ°ï¼Œæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º\(O(n+k)\)ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦çš„æ¡¶çš„æ•°é‡å¤ªå¤šï¼Œæ•°æ®åˆ†å¸ƒå¤ªå¹¿æ—¶ï¼Œè¿™ä¸ªæ’åºç®—æ³•çš„æ•ˆç‡ä¼šå¤§å¤§ä¸‹é™ã€‚</p>

<h2 id="stanford-cs-106x-lecture-29---templates-stl-smart-pointers">Stanford CS 106X Lecture 29 - Templates, STL, Smart Pointers</h2>

<h3 id="templates">Templates</h3>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111012222138.png" alt="image-20211101222221801" style="zoom: 25%;" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">T</span><span class="p">&gt;</span> 
<span class="k">class</span> <span class="nc">ArrayList</span> <span class="p">{</span>
    <span class="c1">// statements</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="smart-pointers">Smart pointers</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">smart pointer types</code>: <code class="language-plaintext highlighter-rouge">#include&lt;memory&gt;</code></li>
</ul>

<ol>
  <li><em>unique_ptr</em> (exactly 1 â€œownerâ€; best one)</li>
  <li><em>shared_ptr</em> (multiple â€œownersâ€; use sparsingly)</li>
  <li><em>weak_ptr</em> (use sparingly)</li>
</ol>

<blockquote>
  <p>ownership: who is responsible for deleting/freeing the heap-allocated pointer later?</p>
</blockquote>

<p>æ™ºèƒ½æŒ‡é’ˆç”Ÿå‘½å‘¨æœŸç»“æŸåï¼Œå¯ä»¥è‡ªåŠ¨é‡Šæ”¾æŒ‡å‘çš„å†…å­˜ï¼Œåœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œå¥½æ¯”æ˜¯åœ¨æ™®é€šæŒ‡é’ˆå¤–åšäº†ä¸€å±‚åŒ…è£¹ã€‚</p>

<p>Example:</p>

<p><img src="https://shaopu-blog.oss-cn-beijing.aliyuncs.com/img/202111012328643.png" alt="image-20211101232858187" style="zoom:50%;" /></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">method</code></li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ListNode</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="k">new</span> <span class="nf">ListNode</span><span class="p">());</span>

<span class="c1">// return raw pointer; p still "owns" it</span>
<span class="c1">// (and will free it later at end of p's scope)</span>
<span class="n">LIstNode</span><span class="o">*</span> <span class="n">raw1</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>

<span class="c1">// return raw pointer; p stops owning it</span>
<span class="c1">// and won't free it any more</span>
<span class="n">ListNode</span><span class="o">*</span> <span class="n">raw2</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">unique_ptr as parameter</code></li>
</ul>

<p>å¦‚æœå°†æ™ºèƒ½æŒ‡é’ˆç›´æ¥ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆç¨‹åºæ— æ³•ç¼–è¯‘ï¼åŒæ—¶ï¼Œæˆ‘ä»¬è¦æ³¨æ„ä¹Ÿ<strong>ä¸èƒ½</strong>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">=</code>å¯¹å…¶è¿›è¡Œèµ‹å€¼ã€‚ä½†æ˜¯<code class="language-plaintext highlighter-rouge">unique_ptr</code>å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼ˆ<code class="language-plaintext highlighter-rouge">move assignment</code>ï¼‰.</p>

:ET